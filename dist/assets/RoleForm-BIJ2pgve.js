import{C as f,B as b,R as x,j as r,L as g}from"./index-LUC8W6HM.js";import{a as n,A as m}from"./AdminApp-BAIHpeWj.js";import"./createLucideIcon-BY9DOx5Q.js";import"./file-text-Bc3jcJvJ.js";import"./ticket-xkTq38T-.js";function w(){var u;const{id:o}=f(),s=!!o,d=b(),[a,l]=x.useState({status:s?"loading":"idle",error:null,form:{role_name:"",description:""}});x.useEffect(()=>{s&&(async()=>{try{const e=await n.get(m.roleById(o)),t=(e==null?void 0:e.role)||e||{};l(i=>({...i,status:"idle",form:{role_name:t.role_name||"",description:t.description||""}}))}catch(e){l(t=>({...t,status:"failed",error:e}))}})()},[o,s]);const p=async e=>{e.preventDefault();try{s?await n.put(m.roleById(o),a.form):await n.post(m.roles(),a.form),d("/admin/roles")}catch(t){l(i=>({...i,error:t}))}};if(a.status==="loading")return r.jsx("div",{children:"Loadingâ€¦"});if(a.status==="failed")return r.jsx("div",{className:"text-red-600",children:((u=a.error)==null?void 0:u.message)||"Failed to load"});const c=a.form;return r.jsxs("form",{onSubmit:p,className:"max-w-xl bg-white border rounded-xl p-4",children:[r.jsxs("h1",{className:"text-xl font-semibold mb-4",children:[s?"Edit":"New"," Role"]}),r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Role Name"}),r.jsx("input",{className:"w-full rounded-md border px-3 py-2 mb-3",value:c.role_name,onChange:e=>l(t=>({...t,form:{...t.form,role_name:e.target.value}}))}),r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description"}),r.jsx("textarea",{className:"w-full rounded-md border px-3 py-2 mb-3",rows:4,value:c.description,onChange:e=>l(t=>({...t,form:{...t.form,description:e.target.value}}))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",className:"rounded-md bg-gray-900 text-white px-4 py-2 text-sm",children:"Save"}),s?r.jsx(g,{to:`/admin/roles/${o}/permissions`,className:"rounded-md border px-4 py-2 text-sm",children:"Edit Permissions"}):null,r.jsx("button",{type:"button",className:"rounded-md border px-4 py-2 text-sm",onClick:()=>d(-1),children:"Cancel"})]})]})}export{w as default};
