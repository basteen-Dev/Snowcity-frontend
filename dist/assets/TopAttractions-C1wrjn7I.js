const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D00xp0hy.js","assets/CategoricalChart-C8vF6RGu.js","assets/index-DpUnVvi7.js","assets/index-DI9d1zcr.css","assets/clsx-B-dksMZM.js","assets/index-DTIaNHTc.js","assets/CartesianChart-1RJQhyYa.js","assets/tooltipContext-UWJEGs02.js","assets/LineChart-4ly3mrh-.js","assets/PieChart-zRVOrLmW.js","assets/BarChart-2oIEB0QF.js"])))=>i.map(i=>d[i]);
import{R as o,D as c,j as r,_ as b}from"./index-DpUnVvi7.js";import{a as h,A as f}from"./AdminApp-DElutmvv.js";import"./createLucideIcon-DlloiUI2.js";import"./file-text-BcxeLTgw.js";import"./users-Dj4zQjFo.js";import"./newspaper-D6LH_a5a.js";import"./ticket-DJwTfedz.js";import"./chevron-down-BM4ufvPU.js";function g({data:a}){const[s,n]=o.useState(null);if(o.useEffect(()=>{let u=!0;return(async()=>{try{const d=await b(()=>import("./index-D00xp0hy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));if(!u)return;n({ResponsiveContainer:d.ResponsiveContainer,BarChart:d.BarChart,Bar:d.Bar,CartesianGrid:d.CartesianGrid,XAxis:d.XAxis,YAxis:d.YAxis,Tooltip:d.Tooltip})}catch(d){console.warn("Recharts failed to load; showing fallback.",d),u&&n(!1)}})(),()=>{u=!1}},[]),s===null)return r.jsx("div",{className:"h-80 bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-3 animate-pulse"});if(s===!1)return r.jsx("div",{className:"h-80 bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-3 flex items-center justify-center text-sm text-gray-600 dark:text-neutral-300",children:"Charts unavailable (recharts not installed). You can install it with: npm i recharts --legacy-peer-deps"});const{ResponsiveContainer:i,BarChart:t,Bar:e,CartesianGrid:l,XAxis:m,YAxis:x,Tooltip:p}=s;return r.jsx("div",{className:"h-80 bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-3",children:r.jsx(i,{width:"100%",height:"100%",children:r.jsxs(t,{data:a,children:[r.jsx(l,{stroke:"#eee",strokeDasharray:"5 5"}),r.jsx(m,{dataKey:"title"}),r.jsx(x,{}),r.jsx(p,{}),r.jsx(e,{dataKey:"total_revenue",fill:"#2563eb",name:"Revenue"})]})})})}function w(){var i;const[a,s]=o.useState({status:"idle",data:[],error:null,from:c().subtract(30,"day").format("YYYY-MM-DD"),to:c().format("YYYY-MM-DD"),limit:10}),n=async()=>{s(t=>({...t,status:"loading",error:null}));try{const t=await h.get(f.analyticsTopAttractions(),{params:{from:a.from,to:a.to,limit:a.limit}}),e=Array.isArray(t==null?void 0:t.data)?t.data:Array.isArray(t)?t:[];s(l=>({...l,status:"succeeded",data:e}))}catch(t){s(e=>({...e,status:"failed",error:t}))}};return o.useEffect(()=>{n()},[]),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 dark:text-neutral-100",children:"Top Attractions"}),r.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-4 gap-2",children:[r.jsx("input",{type:"date",className:"rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:a.from,onChange:t=>s(e=>({...e,from:t.target.value}))}),r.jsx("input",{type:"date",className:"rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:a.to,onChange:t=>s(e=>({...e,to:t.target.value}))}),r.jsx("input",{type:"number",className:"rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:a.limit,onChange:t=>s(e=>({...e,limit:Number(t.target.value||10)}))}),r.jsx("button",{className:"rounded-md border px-3 py-2 text-sm dark:border-neutral-700 dark:text-neutral-200",onClick:n,children:"Apply"})]}),a.status==="failed"?r.jsx("div",{className:"text-red-600",children:((i=a.error)==null?void 0:i.message)||"Failed to load"}):null,r.jsx(g,{data:a.data})]})}export{w as default};
