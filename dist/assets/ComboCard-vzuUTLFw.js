import{A as y,j as n}from"./index-DpUnVvi7.js";import{f as h}from"./formatters-CmiLqhJj.js";import{g as j}from"./pricing-Df4qX4St.js";import{i as v}from"./media-CQLQFIy8.js";const N=r=>{if(r.slug)return r.slug;if(Array.isArray(r.attractions)&&r.attractions.length){const e=r.attractions.map(a=>a.slug).filter(Boolean);if(e.length)return e.join("-")}return null},b=r=>!r&&r!==0?"":v(r,"")||"",A=r=>{if(!r)return"";const e=[r.hero_image,r.banner_image,r.image_web,r.image_mobile,r.image_url,r.cover_image,r.poster_image,r.thumbnail,r.banner_media_id,r.image_media_id,r.cover_media_id,Array.isArray(r.media)?r.media[0]:null,Array.isArray(r.gallery)?r.gallery[0]:null,r.image];for(const a of e){const i=b(a);if(i)return i}return""},l=r=>{const e=Number(r);return Number.isFinite(e)?e:0},k=r=>{if(!r||typeof r!="object")return 0;const e=l(r.total_price);if(e>0)return e;if(Array.isArray(r.attractions)&&r.attractions.length){const c=r.attractions.reduce((o,s)=>o+l((s==null?void 0:s.price)??(s==null?void 0:s.base_price)??(s==null?void 0:s.amount)),0);if(c>0)return c}if(Array.isArray(r.combo_attractions)&&r.combo_attractions.length){const c=r.combo_attractions.reduce((o,s)=>o+l((s==null?void 0:s.attraction_price)??(s==null?void 0:s.price)),0);if(c>0)return c}const a=r.attraction_prices;if(Array.isArray(a)&&a.length){const c=a.reduce((o,s)=>o+l(s),0);if(c>0)return c}else if(a&&typeof a=="object"){const o=Object.values(a).reduce((s,u)=>s+l(u),0);if(o>0)return o}const i=l(r==null?void 0:r.attraction_1_price)+l(r==null?void 0:r.attraction_2_price);return i>0?i:0};function P({item:r}){const e=(r==null?void 0:r.name)||(r==null?void 0:r.title)||"Combo deal",a=(r==null?void 0:r.short_description)||(r==null?void 0:r.subtitle)||"",i=(r==null?void 0:r.combo_id)||(r==null?void 0:r.id)||(r==null?void 0:r.slug)||null,c=A(r),o=j(r,{includeOffers:!1}),s=k(r),u=o>0?o:l(r==null?void 0:r.combo_price)||l(r==null?void 0:r.total_price)||s,p=N(r),g=p?`/combo-${p}`:i?`/combos/${i}`:"/combos",f=(r==null?void 0:r.combo_id)||(r==null?void 0:r.id)||null,x=f?`/booking?combo_id=${f}&type=combo&openDrawer=true`:"/booking?type=combo&openDrawer=true",d=y(),_=t=>{t.preventDefault(),t.stopPropagation()};return n.jsxs("div",{onClick:()=>d(g),className:"exp-card block no-underline cursor-pointer",role:"button",tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),d(g))},children:[n.jsx("div",{className:"exp-card-img",children:c&&n.jsx("img",{src:c,alt:(r==null?void 0:r.image_alt)||e,className:"absolute inset-0 h-full w-full object-cover",loading:"lazy",decoding:"async"})}),n.jsxs("div",{className:"exp-card-body",children:[n.jsx("div",{className:"exp-type",children:"Exclusive Combo"}),n.jsx("div",{className:"exp-name",children:e}),n.jsxs("div",{className:"flex gap-3 mb-6",children:[n.jsx("div",{className:"flex-shrink-0 mt-1"}),n.jsx("div",{className:"exp-desc",children:a})]}),n.jsxs("div",{className:"flex items-center justify-between mt-auto pt-4 border-t border-slate-100",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-wider",children:"Per Person"}),n.jsx("p",{className:"text-xl font-extrabold text-[#1e3a8a]",children:h(u||1299)})]}),n.jsx("div",{onClick:t=>{_(t),sessionStorage.removeItem("snowcity_booking_state"),d(x)},className:"btn-book-exp !py-2.5 !px-6 !text-xs cursor-pointer",children:"Book Now"})]})]})]})}export{P as C};
