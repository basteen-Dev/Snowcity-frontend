import{R as s,j as e,L as N}from"./index-LUC8W6HM.js";import{a as A}from"./AdminApp-BAIHpeWj.js";import"./createLucideIcon-BY9DOx5Q.js";import"./file-text-Bc3jcJvJ.js";import"./ticket-xkTq38T-.js";function E(){const[x,y]=s.useState([]),[o,b]=s.useState(""),[n,v]=s.useState(""),[l,r]=s.useState(1),[d,f]=s.useState(20),[c,k]=s.useState(0),[m,p]=s.useState(""),[h,u]=s.useState(!1),g=async()=>{try{u(!0),p("");const t={q:o,page:l,limit:d};n&&(t.active=n);const a=await A.get("/api/admin/pages",t),j=Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a)?a:[],i=(a==null?void 0:a.meta)||null;y(j),k((i==null?void 0:i.total)??j.length)}catch(t){p(t.message||"Failed to load pages")}finally{u(!1)}};s.useEffect(()=>{g()},[l,d]);const S=t=>{t.preventDefault(),r(1),g()};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("form",{onSubmit:S,className:"flex items-center gap-2",children:[e.jsx("input",{className:"rounded-md border px-3 py-2 text-sm dark:bg-neutral-900 dark:border-neutral-700",placeholder:"Search title/slug",value:o,onChange:t=>b(t.target.value)}),e.jsxs("select",{className:"rounded-md border px-2 py-2 text-sm dark:bg-neutral-900 dark:border-neutral-700",value:n,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]}),e.jsx("button",{className:"px-3 py-2 rounded-md border text-sm",type:"submit",children:"Search"})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx("label",{className:"text-sm",children:"Per page"}),e.jsx("select",{className:"rounded-md border px-2 py-2 text-sm dark:bg-neutral-900 dark:border-neutral-700",value:d,onChange:t=>{f(Number(t.target.value)),r(1)},children:[10,20,50,100].map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx(N,{to:"/admin/catalog/pages/new",className:"px-3 py-2 rounded-md bg-gray-900 text-white text-sm",children:"New Page"})]})]}),m?e.jsx("div",{className:"text-sm text-red-600",children:m}):null,e.jsx("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 dark:border-neutral-800 overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-neutral-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Title"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Slug"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Nav"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Placement"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Active"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),e.jsxs("tbody",{children:[x.map(t=>e.jsxs("tr",{className:"border-t dark:border-neutral-800",children:[e.jsx("td",{className:"px-3 py-2",children:t.title}),e.jsx("td",{className:"px-3 py-2",children:t.slug}),e.jsx("td",{className:"px-3 py-2",children:t.nav_group||"-"}),e.jsx("td",{className:"px-3 py-2",children:t.placement==="none"?"-":t.placement==="home_bottom"?"Home: bottom":t.placement==="attraction_details"?`Attraction details (${t.placement_ref_id||"-"})`:t.placement}),e.jsx("td",{className:"px-3 py-2",children:t.active?"Yes":"No"}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx(N,{className:"px-2 py-1 rounded-md border text-xs",to:`/admin/catalog/pages/${t.page_id}`,children:"Edit"})})]},t.page_id)),!x.length&&!h&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:6,children:"No pages"})})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-neutral-300",children:[c," result",c===1?"":"s"]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 rounded-md border text-sm",disabled:l<=1,onClick:()=>r(t=>Math.max(1,t-1)),children:"Prev"}),e.jsxs("div",{className:"text-sm",children:["Page ",l]}),e.jsx("button",{className:"px-3 py-1 rounded-md border text-sm",disabled:l*d>=c,onClick:()=>r(t=>t+1),children:"Next"})]})]}),h?e.jsx("div",{className:"text-sm text-gray-500",children:"Loadingâ€¦"}):null]})}export{E as default};
