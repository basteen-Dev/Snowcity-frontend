const __vite__mapDeps = (i, m = __vite__mapDeps, d = (m.f || (m.f = ["assets/AdminsList-BclwbI9z.js", "assets/index-DpUnVvi7.js", "assets/index-DI9d1zcr.css", "assets/createLucideIcon-DlloiUI2.js", "assets/file-text-BcxeLTgw.js", "assets/users-Dj4zQjFo.js", "assets/newspaper-D6LH_a5a.js", "assets/ticket-DJwTfedz.js", "assets/chevron-down-BM4ufvPU.js", "assets/AdminNew-CrF-9mro.js", "assets/AdminAccess-pyVk2b1Y.js", "assets/Dashboard-BlR8VDhR.js", "assets/formatters-CmiLqhJj.js", "assets/CategoricalChart-C8vF6RGu.js", "assets/clsx-B-dksMZM.js", "assets/index-DTIaNHTc.js", "assets/LineChart-4ly3mrh-.js", "assets/CartesianChart-1RJQhyYa.js", "assets/PieChart-zRVOrLmW.js", "assets/tooltipContext-UWJEGs02.js", "assets/BookingsList-18iL3r3L.js", "assets/AdminTable-C9C_doBs.js", "assets/AdminPagination-CaGCxGFe.js", "assets/file-spreadsheet-rOefNniJ.js", "assets/BookingDetails-Cj2AKFr8.js", "assets/AttractionsList-B6jKCvJe.js", "assets/sortable.esm-IF2FNsid.js", "assets/AttractionForm-DlRixVUQ.js", "assets/ImageUploader-8sQNEsRz.js", "assets/media-CQLQFIy8.js", "assets/SaveOverlay-YW_4J3BF.js", "assets/SlotList-Brr6Colr.js", "assets/SlotForm-CHcad6YP.js", "assets/SlotBulk-D1sY0UeV.js", "assets/AddonsList-CbR4iCNl.js", "assets/AddonForm-DxRwZBYw.js", "assets/OffersList-CZqaesPw.js", "assets/OfferForm-DNv4zBeL.js", "assets/useCatalogTargets-B-7ild2u.js", "assets/CouponsList-sg6PaFxH.js", "assets/CouponForm-D6yzrLrU.js", "assets/BannersList-DMfKoLcR.js", "assets/BannerForm-DhEwPk3G.js", "assets/PagesList-C0PalV_t.js", "assets/PageForm-BOODTTMt.js", "assets/GalleryField-C6Qb95Re.js", "assets/BlogsList-DRupU2o3.js", "assets/BlogForm-CgLdBgDb.js", "assets/CombosList-DeLUrXPu.js", "assets/ComboForm-Cdc31qs9.js", "assets/AttractionSlotList-BjWijE1R.js", "assets/GalleryManager-GSoWOQp8.js", "assets/GalleryForm-ChYMPxWl.js", "assets/ComboSlotList-BYVBh3ry.js", "assets/ComboSlotForm-BQ9tkAIs.js", "assets/ComboSlotBulk-B4NCbEeT.js", "assets/DynamicPricing-n-9DQ91C.js", "assets/UsersList-DcR8v2hB.js", "assets/UserEdit-D6ei1BBO.js", "assets/RolesList-CY2Ant9X.js", "assets/RoleForm-Dv-4o6L4.js", "assets/Overview-CYg4o62x.js", "assets/Attractions-iFFe_gV7.js", "assets/Daily-Cdzu9T9u.js", "assets/BarChart-2oIEB0QF.js", "assets/Custom-DD5QBqve.js", "assets/People-BZFSrzEL.js", "assets/Views-DT6nm9C9.js", "assets/Split-BPH8P6RD.js", "assets/TopAttractions-C1wrjn7I.js", "assets/ConversionDashboard-BiRxslYY.js", "assets/shopping-cart-Bm7tXnuc.js", "assets/loader-circle-2fTFtA91.js", "assets/plus-BPthzweF.js", "assets/AttractionRevenue-uLVCplqd.js", "assets/ComboRevenue-Bbid3sFp.js"]))) => i.map(i => d[i]);
import { c as H, a as Me, e as h, b as _, d as Ve, f as $e, u as I, s as Ae, R as x, g as Fe, j as e, L as P, N as qe, h as W, i as Ue, k as He, O as Ee, l as C, m as We, n as Ye, o as n, r as c, _ as u, P as Ge } from "./index-DpUnVvi7.js"; import { c as j } from "./createLucideIcon-DlloiUI2.js"; import { F as ee } from "./file-text-BcxeLTgw.js"; import { U as ae, C as Ke } from "./users-Dj4zQjFo.js"; import { G as te, N as Je } from "./newspaper-D6LH_a5a.js"; import { T as Ze } from "./ticket-DJwTfedz.js"; import { C as Qe } from "./chevron-down-BM4ufvPU.js"; const Xe = { user: null, token: null, expires_at: null, checked: !1, perms: [] }, Se = H({ name: "adminAuth", initialState: Xe, reducers: { setAdminCredentials(a, s) { const { user: t, token: r, expires_at: o } = s.payload || {}; a.user = t || null, a.token = r || null, a.expires_at = o || null, a.checked = !0 }, setAdminPermissions(a, s) { a.perms = Array.isArray(s.payload) ? s.payload : [] }, adminLogout(a) { a.user = null, a.token = null, a.expires_at = null, a.checked = !0, a.perms = [] } } }), { setAdminCredentials: ea, setAdminPermissions: se, adminLogout: Y } = Se.actions, aa = Se.reducer, M = {}, ta = (M == null ? void 0 : M.VITE_ADMIN_API_BASE_URL) || "https://snowcity-backend-zjlj.onrender.com", S = Me.create({ baseURL: ta, timeout: 2e4, withCredentials: !1, headers: { "Content-Type": "application/json", Accept: "application/json" } }); let G = null, L = { getToken: () => G, onUnauthorized: null }; function Pe(a) { G = a || null } function sa({ getToken: a, onUnauthorized: s } = {}) { typeof a == "function" && (L.getToken = a), typeof s == "function" && (L.onUnauthorized = s) } const ra = a => { var r; const s = a == null ? void 0 : a.code; return !((r = a == null ? void 0 : a.response) == null ? void 0 : r.status) && (s === "ECONNABORTED" || s === "ERR_NETWORK" || s === "ENETUNREACH" || s === "EAI_AGAIN") }, na = a => { var m; const s = a == null ? void 0 : a.response, t = s == null ? void 0 : s.data, r = (s == null ? void 0 : s.status) || 0, o = (t == null ? void 0 : t.message) || (t == null ? void 0 : t.error) || (a == null ? void 0 : a.message) || "Request failed", i = (t == null ? void 0 : t.code) || ((m = s == null ? void 0 : s.headers) == null ? void 0 : m["x-error-code"]) || (a == null ? void 0 : a.code) || null; return { message: o, status: r, code: i, data: typeof t == "object" ? t : null } }; S.interceptors.request.use(a => { a.headers = a.headers || {}; const s = L.getToken && L.getToken() || G; return s && (a.headers.Authorization = `Bearer ${s}`), a }); S.interceptors.response.use(a => a, async a => { var r; const s = (a == null ? void 0 : a.config) || {}, t = (r = a == null ? void 0 : a.response) == null ? void 0 : r.status; if (s.method === "get" && !s._retry && ra(a)) { s._retry = !0; try { return await S(s) } catch (o) { a = o } } if (t === 401 && typeof L.onUnauthorized == "function") try { await L.onUnauthorized() } catch { } return Promise.reject(na(a)) }); const k = { async get(a, s = {}) { const { fullResponse: t = !1, ...r } = s, o = await S.get(a, r); return t ? o : o.data }, async post(a, s, t = {}) { const { fullResponse: r = !1, ...o } = t, i = await S.post(a, s, o); return r ? i : i.data }, async put(a, s, t = {}) { const { fullResponse: r = !1, ...o } = t, i = await S.put(a, s, o); return r ? i : i.data }, async patch(a, s, t = {}) { const { fullResponse: r = !1, ...o } = t, i = await S.patch(a, s, o); return r ? i : i.data }, async delete(a, s = {}) { const { fullResponse: t = !1, ...r } = s, o = await S.delete(a, r); return t ? o : o.data }, async upload(a, s, t = {}) { const r = new FormData; return r.append("file", s), Object.entries(t).forEach(([i, p]) => r.append(i, p)), (await S.post(a, r, { headers: { "Content-Type": "multipart/form-data" } })).data } }, w = { root: () => "/api/admin", dashboard: () => "/api/admin/dashboard", dashboardRecent: () => "/api/admin/dashboard/recent-bookings", dashboardTopAttractions: () => "/api/admin/dashboard/top-attractions", dashboardStatus: () => "/api/admin/dashboard/status-breakdown", dashboardTrend: () => "/api/admin/dashboard/trend", bookings: () => "/api/admin/bookings", bookingById: a => `/api/admin/bookings/${h(a)}`, bookingCancel: a => `/api/admin/bookings/${h(a)}/cancel`, bookingResendTicket: a => `/api/admin/bookings/${h(a)}/resend-ticket`, bookingResendWhatsApp: a => `/api/admin/bookings/${h(a)}/resend-whatsapp`, bookingResendEmail: a => `/api/admin/bookings/${h(a)}/resend-email`, payphiStatus: a => `/api/admin/bookings/${h(a)}/pay/payphi/status`, payphiInitiate: a => `/api/admin/bookings/${h(a)}/pay/payphi/initiate`, payphiRefund: a => `/api/admin/bookings/${h(a)}/pay/payphi/refund`, attractions: () => "/api/admin/attractions", attractionById: a => `/api/admin/attractions/${h(a)}`, slots: () => "/api/admin/slots", slotsBulk: () => "/api/admin/slots/bulk", slotById: a => `/api/admin/slots/${h(a)}`, addons: () => "/api/admin/addons", coupons: () => "/api/admin/coupons", offers: () => "/api/admin/offers", dynamicPricing: () => "/api/admin/dynamic-pricing", dynamicPricingById: a => `/api/admin/dynamic-pricing/${h(a)}`, attractionDatePrices: a => `/api/admin/attraction-date-prices/${h(a)}`, attractionDatePricesBulk: a => `/api/admin/attraction-date-prices/${h(a)}/bulk`, attractionDatePricesByDate: (a, s) => `/api/admin/attraction-date-prices/${h(a)}/${h(s)}`, comboDatePrices: a => `/api/admin/combo-date-prices/${h(a)}`, comboDatePricesBulk: a => `/api/admin/combo-date-prices/${h(a)}/bulk`, comboDatePricesByDate: (a, s) => `/api/admin/combo-date-prices/${h(a)}/${h(s)}`, combos: () => "/api/admin/combos", comboById: a => `/api/admin/combos/${h(a)}`, comboSlots: () => "/api/admin/combo-slots", comboSlotById: a => `/api/admin/combo-slots/${h(a)}`, comboSlotsBulk: () => "/api/admin/combo-slots/bulk", blogs: () => "/api/admin/blogs", blogById: a => `/api/admin/blogs/${h(a)}`, blogPreview: () => "/api/admin/blogs/preview", pages: () => "/api/admin/pages", pageById: a => `/api/admin/pages/${h(a)}`, pagePreview: () => "/api/admin/pages/preview", gallery: () => "/api/admin/gallery", galleryById: a => `/api/admin/gallery/${h(a)}`, galleryDelete: a => `/api/admin/gallery/${h(a)}`, galleryBulkDelete: () => "/api/admin/gallery/bulk-delete", banners: () => "/api/admin/banners", bannerById: a => `/api/admin/banners/${h(a)}`, bannersReorder: () => "/api/admin/banners/reorder", users: () => "/api/admin/users", userById: a => `/api/admin/users/${h(a)}`, settings: () => "/api/admin/settings", settingKey: a => `/api/admin/settings/${h(a)}`, notifications: () => "/api/admin/notifications", notificationById: a => `/api/admin/notifications/${h(a)}`, holidays: () => "/api/admin/holidays", holidayById: a => `/api/admin/holidays/${h(a)}`, happyHours: () => "/api/admin/happy-hours", happyHourById: a => `/api/admin/happy-hours/${h(a)}`, roles: () => "/api/admin/roles", roleById: a => `/api/admin/roles/${h(a)}`, rolePerms: a => `/api/admin/roles/${h(a)}/permissions`, permissions: () => "/api/admin/permissions", permissionById: a => `/api/admin/permissions/${h(a)}`, analyticsOverview: () => "/api/admin/analytics/overview", analyticsTrend: () => "/api/admin/analytics/trend", analyticsTopAttractions: () => "/api/admin/analytics/top-attractions", analyticsAttractionRevenue: () => "/api/admin/analytics/attraction-revenue", analyticsComboRevenue: () => "/api/admin/analytics/combo-revenue", analyticsReport: (a = "csv") => `/api/admin/analytics/report.${a}`, analytics: () => "/api/admin/analytics", conversionSummary: () => "/api/admin/conversion/summary", conversionAdSpend: () => "/api/admin/conversion/ad-spend", conversionAdSpendById: a => `/api/admin/conversion/ad-spend/${h(a)}` }, oa = (a, s) => a && typeof a == "object" ? { message: a.message || s, status: a.status || 0, code: a.code || null } : { message: String(a || s) }, V = _("adminDashboard/fetchDashboard", async (a, { rejectWithValue: s }) => { try { const [t, r, o, i] = await Promise.all([k.get(w.dashboard()), k.get(w.dashboardRecent()), k.get(w.dashboardTopAttractions()), k.get(w.dashboardStatus())]); return { main: t, recent: r, top: o, status: i } } catch (t) { return s(t) } }), ia = H({ name: "adminDashboard", initialState: { data: null, status: "idle", error: null }, reducers: {}, extraReducers: a => { a.addCase(V.pending, s => { s.status = "loading", s.error = null }), a.addCase(V.fulfilled, (s, t) => { s.status = "succeeded", s.data = t.payload }), a.addCase(V.rejected, (s, t) => { s.status = "failed", s.error = oa(t.payload || t.error, "Failed to load dashboard") }) } }), la = ia.reducer, $ = (a, s) => a && typeof a == "object" ? { message: a.message || s, status: a.status || 0, code: a.code || null } : { message: String(a || s) }, F = _("adminBookings/list", async (a = { page: 1, limit: 20 }, { rejectWithValue: s }) => { try { const t = await k.get(w.bookings(), { params: a }); return { data: Array.isArray(t == null ? void 0 : t.data) ? t.data : Array.isArray(t) ? t : [], meta: (t == null ? void 0 : t.meta) || null, query: a } } catch (t) { return s(t) } }), q = _("adminBookings/getOne", async ({ id: a }, { rejectWithValue: s }) => { try { const t = await k.get(w.bookingById(a)); return (t == null ? void 0 : t.booking) || t } catch (t) { return s(t) } }), da = _("adminBookings/update", async ({ id: a, patch: s }, { rejectWithValue: t }) => { try { const r = await k.put(w.bookingById(a), s); return (r == null ? void 0 : r.booking) || r } catch (r) { return t(r) } }), ca = _("adminBookings/cancel", async ({ id: a }, { rejectWithValue: s }) => { try { const t = await k.post(w.bookingCancel(a)); return (t == null ? void 0 : t.booking) || t } catch (t) { return s(t) } }), ma = _("adminBookings/payphiStatus", async ({ id: a }, { rejectWithValue: s }) => { try { const t = await k.get(w.payphiStatus(a)); return { id: a, ...t } } catch (t) { return s(t) } }), ua = _("adminBookings/payphiInitiate", async ({ id: a, email: s, mobile: t }, { rejectWithValue: r }) => { try { const o = await k.post(w.payphiInitiate(a), { email: s, mobile: t }); return { id: a, ...o } } catch (o) { return r(o) } }), pa = _("adminBookings/payphiRefund", async ({ id: a, amount: s, newMerchantTxnNo: t }, { rejectWithValue: r }) => { try { const o = await k.post(w.payphiRefund(a), { amount: s, newMerchantTxnNo: t }); return { id: a, ...o } } catch (o) { return r(o) } }), ga = _("adminBookings/resendTicket", async ({ id: a }, { rejectWithValue: s }) => { try { const t = await k.post(w.bookingResendTicket(a)); return { id: a, ...t } } catch (t) { return s(t) } }), xa = _("adminBookings/resendWhatsApp", async ({ id: a }, { rejectWithValue: s }) => { try { const t = await k.post(w.bookingResendWhatsApp(a)); return { id: a, ...t } } catch (t) { return s(t) } }), ha = _("adminBookings/resendEmail", async ({ id: a }, { rejectWithValue: s }) => { try { const t = await k.post(w.bookingResendEmail(a)); return { id: a, ...t } } catch (t) { return s(t) } }), ya = H({ name: "adminBookings", initialState: { list: { status: "idle", data: [], meta: null, error: null, query: { page: 1, limit: 20 } }, current: { status: "idle", data: null, error: null }, action: { status: "idle", error: null } }, reducers: {}, extraReducers: a => { a.addCase(F.pending, s => { s.list.status = "loading", s.list.error = null }), a.addCase(F.fulfilled, (s, t) => { s.list.status = "succeeded", s.list.data = t.payload.data, s.list.meta = t.payload.meta, s.list.query = t.payload.query }), a.addCase(F.rejected, (s, t) => { s.list.status = "failed", s.list.error = $(t.payload || t.error, "Failed to load bookings") }), a.addCase(q.pending, s => { s.current.status = "loading", s.current.error = null, s.current.data = null }), a.addCase(q.fulfilled, (s, t) => { s.current.status = "succeeded", s.current.data = t.payload }), a.addCase(q.rejected, (s, t) => { s.current.status = "failed", s.current.error = $(t.payload || t.error, "Failed to load booking") }); for (const s of [da, ca, ma, ua, pa, ga, xa, ha]) a.addCase(s.pending, t => { t.action.status = "loading", t.action.error = null }), a.addCase(s.fulfilled, t => { t.action.status = "succeeded" }), a.addCase(s.rejected, (t, r) => { t.action.status = "failed", t.action.error = $(r.payload || r.error, "Action failed") }) } }), ba = ya.reducer, re = !1, B = "sc_admin_auth", fa = a => { try { return JSON.parse(a) } catch { return null } }, ka = () => { const a = localStorage.getItem(B); if (!a) return; const s = fa(a); if (s != null && s.expires_at) { const t = new Date(s.expires_at).getTime(); if (Number.isFinite(t) && Date.now() >= t) { localStorage.removeItem(B); return } } return s }, ja = a => { if (!a || !a.token) { localStorage.removeItem(B); return } localStorage.setItem(B, JSON.stringify({ user: a.user || null, token: a.token, expires_at: a.expires_at || null })) }, Ce = $e(); Ce.startListening({ predicate: a => a.type === "adminAuth/setAdminCredentials" || a.type === "adminAuth/adminLogout", effect: (a, s) => { var r; const t = a.type === "adminAuth/setAdminCredentials" && ((r = a.payload) == null ? void 0 : r.token) || null; Pe(t), ja(s.getState().adminAuth) } }); const O = { adminAuth: ka() }, z = Ve({ reducer: { adminAuth: aa, adminDashboard: la, adminBookings: ba }, preloadedState: O, middleware: a => a({ serializableCheck: { warnAfter: 64 }, immutableCheck: re }).prepend(Ce.middleware), devTools: re }); var Ne; Pe(((Ne = O == null ? void 0 : O.adminAuth) == null ? void 0 : Ne.token) || null); sa({ getToken: () => { var a; return ((a = z.getState().adminAuth) == null ? void 0 : a.token) || null }, onUnauthorized: async () => { var s; ((s = z.getState().adminAuth) == null ? void 0 : s.token) && z.dispatch(Y()) } });/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va = [["path", { d: "M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z", key: "3c2336" }], ["path", { d: "m15 9-6 6", key: "1uzhvr" }], ["path", { d: "M9 9h.01", key: "1q5me6" }], ["path", { d: "M15 15h.01", key: "lqbp3k" }]], wa = j("badge-percent", va);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a = [["path", { d: "M10.268 21a2 2 0 0 0 3.464 0", key: "vwvbt9" }], ["path", { d: "M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326", key: "11g9vi" }]], Na = j("bell", _a);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa = [["path", { d: "M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z", key: "lc1i9w" }], ["path", { d: "m7 16.5-4.74-2.85", key: "1o9zyk" }], ["path", { d: "m7 16.5 5-3", key: "va8pkn" }], ["path", { d: "M7 16.5v5.17", key: "jnp8gn" }], ["path", { d: "M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z", key: "8zsnat" }], ["path", { d: "m17 16.5-5-3", key: "8arw3v" }], ["path", { d: "m17 16.5 4.74-2.85", key: "8rfmw" }], ["path", { d: "M17 16.5v5.17", key: "k6z78m" }], ["path", { d: "M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z", key: "1xygjf" }], ["path", { d: "M12 8 7.26 5.15", key: "1vbdud" }], ["path", { d: "m12 8 4.74-2.85", key: "3rx089" }], ["path", { d: "M12 13.5V8", key: "1io7kd" }]], Ea = j("boxes", Aa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa = [["path", { d: "M10 12h4", key: "a56b0p" }], ["path", { d: "M10 8h4", key: "1sr2af" }], ["path", { d: "M14 21v-3a2 2 0 0 0-4 0v3", key: "1rgiei" }], ["path", { d: "M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2", key: "secmi2" }], ["path", { d: "M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16", key: "16ra0t" }]], Pa = j("building-2", Sa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca = [["path", { d: "M16 14v2.2l1.6 1", key: "fo4ql5" }], ["path", { d: "M16 2v4", key: "4m81vk" }], ["path", { d: "M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5", key: "1osxxc" }], ["path", { d: "M3 10h5", key: "r794hk" }], ["path", { d: "M8 2v4", key: "1cmpym" }], ["circle", { cx: "16", cy: "16", r: "6", key: "qoo3c4" }]], La = j("calendar-clock", Ca);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra = [["path", { d: "M3 3v16a2 2 0 0 0 2 2h16", key: "c24i48" }], ["path", { d: "M18 17V9", key: "2bz60n" }], ["path", { d: "M13 17V5", key: "1frdt8" }], ["path", { d: "M8 17v-3", key: "17ska0" }]], Ta = j("chart-column", Ra);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia = [["path", { d: "M12 6v6h4", key: "135r8i" }], ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]], Da = j("clock-3", Ia);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa = [["line", { x1: "12", x2: "12", y1: "2", y2: "22", key: "7eqyqh" }], ["path", { d: "M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6", key: "1b0p4s" }]], U = j("dollar-sign", Oa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za = [["path", { d: "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0", key: "1nclc0" }], ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]], Ba = j("eye", za);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma = [["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", ry: "2", key: "1m3agn" }], ["circle", { cx: "9", cy: "9", r: "2", key: "af1f0g" }], ["path", { d: "m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21", key: "1xmnt7" }]], ne = j("image", Ma);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va = [["path", { d: "M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z", key: "1s6t7t" }], ["circle", { cx: "16.5", cy: "7.5", r: ".5", fill: "currentColor", key: "w0ekpg" }]], $a = j("key-round", Va);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa = [["rect", { width: "7", height: "9", x: "3", y: "3", rx: "1", key: "10lvy0" }], ["rect", { width: "7", height: "5", x: "14", y: "3", rx: "1", key: "16une8" }], ["rect", { width: "7", height: "9", x: "14", y: "12", rx: "1", key: "1hutg5" }], ["rect", { width: "7", height: "5", x: "3", y: "16", rx: "1", key: "ldoo1y" }]], qa = j("layout-dashboard", Fa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua = [["path", { d: "m21 21-4.34-4.34", key: "14j7rj" }], ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }]], Ha = j("search", Ua);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa = [["path", { d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z", key: "oel41y" }], ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]], Ya = j("shield-check", Wa);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga = [["path", { d: "M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3", key: "lubmu8" }], ["path", { d: "M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3", key: "1ag34g" }], ["line", { x1: "12", x2: "12", y1: "4", y2: "20", key: "1tx1rr" }]], Ka = j("square-split-horizontal", Ga);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja = [["path", { d: "M16 7h6v6", key: "box55l" }], ["path", { d: "m22 7-8.5 8.5-5-5L2 17", key: "1t1m79" }]], oe = j("trending-up", Ja);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za = [["path", { d: "M10 15H6a4 4 0 0 0-4 4v2", key: "1nfge6" }], ["path", { d: "m14.305 16.53.923-.382", key: "1itpsq" }], ["path", { d: "m15.228 13.852-.923-.383", key: "eplpkm" }], ["path", { d: "m16.852 12.228-.383-.923", key: "13v3q0" }], ["path", { d: "m16.852 17.772-.383.924", key: "1i8mnm" }], ["path", { d: "m19.148 12.228.383-.923", key: "1q8j1v" }], ["path", { d: "m19.53 18.696-.382-.924", key: "vk1qj3" }], ["path", { d: "m20.772 13.852.924-.383", key: "n880s0" }], ["path", { d: "m20.772 16.148.924.383", key: "1g6xey" }], ["circle", { cx: "18", cy: "15", r: "3", key: "gjjjvw" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]], Qa = j("user-cog", Za), Xa = Object.freeze([]), et = Object.freeze([]), at = a => { const s = a.adminAuth || {}, t = s.user || null; return { perms: Array.isArray(s.perms) ? s.perms : Xa, roles: Array.isArray(t == null ? void 0 : t.roles) ? t.roles : et, userId: (t == null ? void 0 : t.user_id) ?? (t == null ? void 0 : t.id) ?? null } }; function tt({ anyOf: a = [], allOf: s = [], children: t, fallback: r = null }) { const { perms: o, roles: i, userId: p } = I(at, Ae), m = x.useMemo(() => new Set(i.map(d => String(d).toLowerCase())), [i]); if (p != null && Number(p) === 1 || m.has("root") || m.has("superadmin")) return t; const y = s.length ? s.every(d => o.includes(d)) : !0, l = a.length ? a.some(d => o.includes(d)) : !0; return y && l ? t : r || null } const st = "group relative flex items-center gap-3 px-3 py-2 rounded-xl text-sm transition-colors", ie = "sc_admin_sidebar_open_sections"; function rt(a) { return a ? typeof a == "string" ? a.toLowerCase().trim() : String(a.role_name || a.name || a).toLowerCase().trim() : "" } function nt(a) { const [s, t] = x.useState(() => { try { const i = localStorage.getItem(ie); if (!i) return a; const p = JSON.parse(i); return typeof p == "object" && p ? { ...a, ...p } : a } catch { return a } }), r = x.useCallback(i => { t(i); try { localStorage.setItem(ie, JSON.stringify(i)) } catch { } }, []), o = x.useCallback((i, p) => { r({ ...s, [i]: !!p }) }, [s, r]); return [s, o] } const ot = Object.freeze([]), it = Object.freeze([]), lt = a => { const s = a.adminAuth || {}, t = s.user || null; return { roles: Array.isArray(t == null ? void 0 : t.roles) ? t.roles : ot, perms: Array.isArray(s.perms) ? s.perms : it, userId: (t == null ? void 0 : t.user_id) ?? (t == null ? void 0 : t.id) ?? null } }; function le({ collapsed: a, onClose: s }) { const t = Fe(), { roles: r, perms: o, userId: i } = I(lt, Ae), p = x.useMemo(() => (r || []).map(rt), [r]), m = x.useMemo(() => new Set((o || []).map(b => String(b).toLowerCase().trim())), [o]), y = i != null && Number(i) === 1 || p.includes("root") || p.includes("superadmin") || m.has("admin-management:manage") || m.has("admin-management:write") || m.has("admin-management:read") || m.has("admins:manage") || m.has("admins:write") || m.has("admins:read"), l = () => { typeof s == "function" && s() }, [d, v] = x.useState(""), R = x.useMemo(() => { const b = [{ key: "Dashboard", label: "Overview", items: [{ to: "/admin", end: !0, label: "Executive Dashboard", icon: qa }] }, { key: "Analytics", label: "Analytics", items: [{ to: "/admin/analytics/overview", label: "Overview", icon: Ta }, { to: "/admin/analytics/attractions", label: "Attractions", icon: Pa }, { to: "/admin/analytics/daily", label: "Daily Trend", icon: oe }, { to: "/admin/analytics/split", label: "Split Analysis", icon: Ka }, { to: "/admin/analytics/custom", label: "Custom Report", icon: ee }, { to: "/admin/analytics/people", label: "People", icon: ae }, { to: "/admin/analytics/views", label: "Views", icon: Ba }, { to: "/admin/analytics/conversion", label: "Conversion", icon: oe }, { to: "/admin/revenue/attractions", label: "Attraction Revenue", icon: U }, { to: "/admin/revenue/combos", label: "Combo Revenue", icon: U }] }, { key: "Bookings", label: "Bookings", items: [{ to: "/admin/bookings", label: "All Bookings", icon: La }, { to: "/admin/bookings/calendar", label: "Booking Calendar", icon: Ke }, { to: "/admin/bookings/slots", label: "Time Slots", icon: Da }] }, { key: "Catalog", label: "Catalog", items: [{ to: "/admin/catalog/attractions", label: "Attractions", icon: te }, { to: "/admin/catalog/addons", label: "Add-ons", icon: te }, { to: "/admin/catalog/combos", label: "Combos", icon: Ea }, { to: "/admin/catalog/offers", label: "Offers", icon: wa }, { to: "/admin/catalog/dynamic-pricing", label: "Dynamic Pricing", icon: U }, { to: "/admin/catalog/coupons", label: "Coupons", icon: Ze }, { to: "/admin/catalog/banners", label: "Banners", icon: ne }, { to: "/admin/catalog/gallery", label: "Gallery", icon: ne }, { to: "/admin/catalog/pages", label: "Pages", icon: ee }, { to: "/admin/catalog/blogs", label: "Blogs", icon: Je }] }, ...p.includes("subadmin") && !p.includes("admin") && !p.includes("root") && !p.includes("superadmin") ? [] : [{ key: "AdminManagement", label: "People", items: [{ to: "/admin/users", label: "Customers", icon: ae }, { to: "/admin/roles", label: "Admin Roles", icon: Ya }, ...y ? [{ to: "/admin/admins", label: "Admin Team", icon: Qa, permsAny: ["admin-management:read"] }, { to: "/admin/admins/access", label: "Grant Access", icon: $a, permsAny: ["admin-management:write", "admin-management:manage"] }] : []] }]]; if (d.trim() === "") return b; const N = d.trim().toLowerCase(); return b.map(A => { const E = A.items.filter(D => D.label.toLowerCase().includes(N)); return E.length ? { ...A, items: E } : null }).filter(Boolean) }, [y, d]), f = x.useMemo(() => ({ Dashboard: !0, Analytics: !1, Bookings: !0, Catalog: !0, AdminManagement: !0, UsersRBAC: !1 }), []), [T, K] = nt(f); x.useEffect(() => { const b = t.pathname || ""; for (const N of R) N.items.some(E => b.startsWith(E.to)) && !T[N.key] && K(N.key, !0) }, [t.pathname, R]); const De = b => K(b, !T[b]), Oe = x.useCallback((b, N = !1) => { if (!b) return !1; const A = t.pathname || ""; return N ? A === b : b === "/admin" ? A === "/admin" : A.startsWith(b) }, [t.pathname]); return e.jsxs("aside", { className: ["h-screen sticky top-0 border-r border-white/20 dark:border-neutral-900/60 bg-gradient-to-b from-white/90 via-white to-white/60 dark:from-neutral-950 dark:via-neutral-950 dark:to-neutral-900 backdrop-blur-xl transition-[width] duration-200 ease-in-out shadow-[0_10px_40px_rgba(15,23,42,0.08)] dark:shadow-none", a ? "w-20" : "w-72"].join(" "), "aria-label": "Admin navigation", children: [e.jsxs("div", { className: "px-4 py-5 flex items-center justify-between border-b border-gray-200/50 dark:border-neutral-900/60", children: [e.jsxs("div", { className: "flex items-center gap-3", children: [e.jsx("div", { className: "flex h-10 w-10 items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white font-semibold shadow-lg shadow-blue-500/30", children: "SC" }), !a && e.jsxs("div", { children: [e.jsx("p", { className: "text-sm font-semibold text-gray-900 dark:text-neutral-100", children: "SnowCity Admin" }), e.jsx("p", { className: "text-xs text-gray-500 dark:text-neutral-400", children: "Experience Excellence" })] })] }), e.jsx("button", { className: "md:hidden rounded-full p-2 text-gray-500 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800", onClick: s, "aria-label": "Close navigation", children: "✕" })] }), !a && e.jsx("div", { className: "px-4 pt-4", children: e.jsx("label", { className: "relative block", children: e.jsx("input", { type: "search", value: d, onChange: b => v(b.target.value), placeholder: "Quick find…", className: "w-full rounded-2xl border border-gray-200/80 bg-white/80 dark:bg-neutral-900 px-3 py-2 text-sm text-gray-700 dark:text-neutral-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40" }) }) }), e.jsx("nav", { className: "px-3 pb-4 h-[calc(100vh-140px)] overflow-y-auto", children: R.map(b => { var A; if (!((A = b.items) != null && A.length)) return null; const N = !!T[b.key]; return e.jsxs("div", { className: "mt-3 first:mt-0", children: [e.jsxs("button", { type: "button", className: ["w-full flex items-center justify-between px-3 py-2 rounded-2xl text-xs font-semibold tracking-wide uppercase", "text-gray-500 dark:text-neutral-400 hover:bg-gray-100/70 dark:hover:bg-neutral-800/70 backdrop-blur"].join(" "), onClick: () => De(b.key), "aria-expanded": N, "aria-controls": `section-${b.key}`, title: a ? b.label : void 0, children: [!a && e.jsx("span", { className: "font-medium", children: b.label }), a && e.jsx("span", { className: "font-medium", "aria-hidden": "true", children: b.label.charAt(0) }), e.jsx(Qe, { className: ["h-4 w-4 shrink-0 transition-transform", N ? "rotate-180" : ""].join(" ") })] }), e.jsx("div", { id: `section-${b.key}`, className: ["overflow-hidden transition-all", N ? "max-h-[1200px] ease-in" : "max-h-0 ease-out"].join(" "), children: e.jsx("div", { className: "mt-1 space-y-1", children: b.items.map(({ to: E, end: D, label: J, icon: ze, permsAny: Z, permsAll: Q }) => { const X = e.jsxs(qe, { to: E, end: D, title: a ? J : void 0, className: ({ isActive: Be }) => [st, a ? "justify-center px-2" : "justify-start px-3", Be ? "bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30" : "text-gray-600 dark:text-neutral-300 hover:bg-gray-100/80 dark:hover:bg-neutral-800"].join(" "), onClick: l, children: [e.jsx(ze, { className: "h-5 w-5", "aria-hidden": "true" }), !a && e.jsx("span", { children: J })] }, E); return Z || Q ? e.jsx(tt, { anyOf: Z || [], allOf: Q || [], children: X }, E) : e.jsxs("div", { className: "relative", children: [X, Oe(E, D) && !a && e.jsx("span", { className: "absolute right-3 top-1/2 -translate-y-1/2 h-1.5 w-1.5 rounded-full bg-emerald-400", "aria-hidden": "true" })] }, E) }) }) })] }, b.key) }) }), e.jsx("div", { className: "px-4 pb-5", children: e.jsxs("div", { className: "rounded-2xl bg-gradient-to-br from-slate-900 via-indigo-900 to-blue-700 text-white p-4 shadow-lg", children: [e.jsx("p", { className: "text-sm font-semibold mb-1", children: "Need quick access?" }), e.jsx("p", { className: "text-xs text-white/80 mb-3", children: "Jump to bookings or reach support instantly." }), e.jsxs("div", { className: "flex flex-col gap-2", children: [e.jsx(P, { to: "/admin/bookings", className: "inline-flex items-center justify-center rounded-full bg-white/10 px-3 py-1.5 text-xs font-semibold hover:bg-white/20", onClick: l, children: "Go to Bookings" }), e.jsx("a", { href: "mailto:support@snowcity.com", className: "inline-flex items-center justify-center rounded-full bg-white text-slate-900 px-3 py-1.5 text-xs font-semibold", children: "Contact Support" })] })] }) })] }) } const Le = "sc_admin_theme", dt = () => localStorage.getItem(Le) || "system", Re = () => typeof window < "u" && window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches, de = a => { const s = document.documentElement, t = a === "dark" || a === "system" && Re(); s.classList.toggle("dark", !!t) }; function Te() { const [a, s] = x.useState(dt()); x.useEffect(() => { de(a), localStorage.setItem(Le, a) }, [a]), x.useEffect(() => { if (a !== "system") return; const r = window.matchMedia("(prefers-color-scheme: dark)"), o = () => de("system"); return r.addEventListener("change", o), () => r.removeEventListener("change", o) }, [a]); const t = a === "dark" || a === "system" && Re(); return { theme: a, setTheme: s, isDark: t } } function ce({ compact: a = !1 }) { const { theme: s, setTheme: t } = Te(); return e.jsxs("div", { className: `inline-flex items-center gap-1 ${a ? "" : "p-1 border rounded-lg bg-white dark:bg-neutral-900 dark:border-neutral-700"}`, children: [e.jsx("button", { className: `px-2 py-1 rounded-md text-xs ${s === "light" ? "bg-gray-900 text-white" : "border dark:border-neutral-700 dark:text-neutral-200"}`, onClick: () => t("light"), children: "Light" }), e.jsx("button", { className: `px-2 py-1 rounded-md text-xs ${s === "dark" ? "bg-gray-900 text-white" : "border dark:border-neutral-700 dark:text-neutral-200"}`, onClick: () => t("dark"), children: "Dark" }), e.jsx("button", { className: `px-2 py-1 rounded-md text-xs ${s === "system" ? "bg-gray-900 text-white" : "border dark:border-neutral-700 dark:text-neutral-200"}`, onClick: () => t("system"), children: "System" })] }) } const ct = [{ label: "Reports", to: "/admin/analytics/overview" }, { label: "Offers", to: "/admin/catalog/offers" }]; function mt({ onToggleSidebar: a, onToggleMobile: s }) { const t = I(l => { var d; return (d = l.adminAuth) == null ? void 0 : d.user }), r = W(), o = ((t == null ? void 0 : t.name) || (t == null ? void 0 : t.email) || "A").charAt(0).toUpperCase(), [i, p] = x.useState(!1), [m, g] = x.useState(""), y = x.useRef(null); return x.useEffect(() => { const l = d => { y.current && !y.current.contains(d.target) && p(!1) }; return document.addEventListener("mousedown", l), () => document.removeEventListener("mousedown", l) }, []), e.jsx("header", { className: "sticky top-0 z-40 bg-white/90 dark:bg-neutral-900/80 backdrop-blur supports-[backdrop-filter]:bg-white/70 border-b border-gray-200 dark:border-neutral-800", children: e.jsxs("div", { className: "h-16 px-3 md:px-6 flex items-center justify-between gap-4", children: [e.jsxs("div", { className: "flex items-center gap-2", children: [e.jsx("button", { className: "md:hidden rounded-xl border border-gray-200 px-3 py-2 text-gray-600", onClick: s, "aria-label": "Open navigation", children: "☰" }), e.jsx("button", { className: "hidden md:inline-flex rounded-xl border border-gray-200 px-3 py-2 text-gray-600", onClick: a, "aria-label": "Toggle navigation", children: "☰" }), e.jsxs("div", { className: "hidden md:flex flex-col", children: [e.jsx("span", { className: "text-xs uppercase tracking-wide text-gray-500", children: "SnowCity Admin" }), e.jsx("span", { className: "text-sm font-semibold text-gray-900", children: "Operations Control" })] })] }), e.jsxs("div", { className: "flex-1 flex items-center gap-3 max-w-3xl", children: [e.jsxs("label", { className: "flex-1 relative", children: [e.jsx(Ha, { className: "h-4 w-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2" }), e.jsx("input", { type: "search", value: m, onChange: l => g(l.target.value), placeholder: "Search bookings, users, offers...", className: "w-full rounded-full border border-gray-200 bg-white px-10 py-2 text-sm shadow-sm focus:border-gray-400 focus:outline-none" })] }), e.jsx("div", { className: "hidden lg:flex items-center gap-2", children: ct.map(l => e.jsx(P, { to: l.to, className: "rounded-full border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:border-gray-400", children: l.label }, l.to)) })] }), e.jsxs("div", { className: "flex items-center gap-2", children: [e.jsx("button", { className: "hidden md:inline-flex h-9 w-9 items-center justify-center rounded-full border border-gray-200 text-gray-500", "aria-label": "Notifications", children: e.jsx(Na, { className: "h-4 w-4" }) }), e.jsx("div", { className: "hidden md:block", children: e.jsx(ce, { compact: !0 }) }), e.jsxs("div", { className: "relative", ref: y, children: [e.jsx("button", { className: "h-10 w-10 rounded-full bg-gradient-to-br from-gray-900 to-gray-700 text-white flex items-center justify-center", title: (t == null ? void 0 : t.name) || (t == null ? void 0 : t.email) || "Profile", onClick: () => p(l => !l), children: o }), i && e.jsxs("div", { className: "absolute right-0 top-full mt-3 w-64 rounded-2xl border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 shadow-xl z-50 overflow-hidden", children: [e.jsxs("div", { className: "px-4 py-3", children: [e.jsx("p", { className: "text-sm font-semibold text-gray-900 dark:text-neutral-50", children: (t == null ? void 0 : t.name) || "Admin user" }), e.jsx("p", { className: "text-xs text-gray-500", children: t == null ? void 0 : t.email })] }), e.jsx("div", { className: "border-t border-gray-200 dark:border-neutral-800" }), e.jsxs("div", { className: "px-4 py-3 flex items-center justify-between", children: [e.jsx("span", { className: "text-xs text-gray-500", children: "Theme" }), e.jsx(ce, {})] }), e.jsx("div", { className: "border-t border-gray-200 dark:border-neutral-800" }), e.jsx(P, { to: "/admin/profile", className: "block px-4 py-3 text-sm text-gray-700 dark:text-neutral-200 hover:bg-gray-50 dark:hover:bg-neutral-800", onClick: () => p(!1), children: "Profile & Settings" }), e.jsx("button", { className: "w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-gray-50 dark:hover:bg-neutral-800", onClick: () => { p(!1), r(Y()) }, children: "Logout" })] })] })] })] }) }) } const ut = _("adminAuth/adminLogin", async ({ email: a, password: s }, { dispatch: t, rejectWithValue: r }) => { var o, i, p, m; try { const g = await Ue.post(He.auth.login(), { email: a, password: s, isAdmin: !0 }), y = g == null ? void 0 : g.token; if (!y) throw new Error("No token from login"); return t(ea({ user: { ...g == null ? void 0 : g.user, isAdmin: !0 }, token: y, expires_at: (g == null ? void 0 : g.expires_at) || null })), await t(Ie()).unwrap(), g } catch (g) { t(Y()); const y = ((i = (o = g == null ? void 0 : g.response) == null ? void 0 : o.data) == null ? void 0 : i.error) || ((m = (p = g == null ? void 0 : g.response) == null ? void 0 : p.data) == null ? void 0 : m.message) || (g == null ? void 0 : g.message) || "Login failed"; return r(y) } }), Ie = _("adminAuth/hydratePerms", async (a, { dispatch: s, rejectWithValue: t }) => { var r, o, i, p; try { const m = ["all"]; return s(se(m)), m } catch (m) { s(se([])); const g = ((o = (r = m == null ? void 0 : m.response) == null ? void 0 : r.data) == null ? void 0 : o.error) || ((p = (i = m == null ? void 0 : m.response) == null ? void 0 : i.data) == null ? void 0 : p.message) || (m == null ? void 0 : m.message) || "Failed to hydrate permissions"; return t(g) } }); function pt() { const [a, s] = x.useState(!1), [t, r] = x.useState(!1), o = W(); return Te(), x.useEffect(() => { o(Ie()).catch(() => { }) }, [o]), e.jsxs("div", { className: "min-h-screen bg-slate-100/60 dark:bg-neutral-950", children: [e.jsxs("div", { className: "pointer-events-none fixed inset-0 z-0 opacity-60", children: [e.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(59,130,246,0.12),transparent_45%)]" }), e.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(circle_at_bottom,_rgba(14,165,233,0.09),transparent_50%)]" })] }), e.jsxs("div", { className: "relative z-10 flex", children: [e.jsx("div", { className: "hidden md:block", children: e.jsx(le, { collapsed: a, onClose: () => { } }) }), t && e.jsxs(e.Fragment, { children: [e.jsx("div", { className: "fixed inset-0 bg-black/40 z-40", onClick: () => r(!1) }), e.jsx("div", { className: "fixed left-0 top-0 bottom-0 w-64 bg-white dark:bg-neutral-900 z-50 shadow-lg", children: e.jsx(le, { collapsed: !1, onClose: () => r(!1) }) })] }), e.jsxs("div", { className: "flex-1 min-w-0", children: [e.jsx(mt, { onToggleSidebar: () => s(i => !i), onToggleMobile: () => r(i => !i) }), e.jsx("div", { className: "p-4 md:p-6", children: e.jsx(Ee, {}) })] })] })] }) } function gt() { const a = W(), s = I(y => { var l; return (l = y.adminAuth) == null ? void 0 : l.token }), [t, r] = x.useState({ email: "", password: "" }), [o, i] = x.useState("idle"), [p, m] = x.useState(null); if (s) return e.jsx(C, { to: "/admin", replace: !0 }); const g = async y => { y.preventDefault(), i("loading"), m(null); try { await a(ut(t)).unwrap() } catch (l) { m((l == null ? void 0 : l.message) || "Login failed"), i("failed") } }; return e.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 px-4", children: e.jsxs("div", { className: "w-full max-w-md", children: [e.jsxs("div", { className: "text-center mb-8", children: [e.jsx("div", { className: "inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-xl mb-4", children: e.jsx("svg", { className: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: e.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" }) }) }), e.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Admin Portal" }), e.jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-1", children: "Sign in to your account" })] }), e.jsxs("div", { className: "bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg p-8", children: [e.jsxs("form", { onSubmit: g, className: "space-y-6", children: [e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Email Address" }), e.jsx("input", { type: "email", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: t.email, onChange: y => r({ ...t, email: y.target.value }), placeholder: "Enter your email address", required: !0 })] }), e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Password" }), e.jsx("input", { type: "password", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: t.password, onChange: y => r({ ...t, password: y.target.value }), placeholder: "Enter your password", required: !0 })] }), p && e.jsx("div", { className: "p-3 bg-red-50 border border-red-200 rounded-lg", children: e.jsx("p", { className: "text-sm text-red-600", children: p }) }), e.jsx("button", { type: "submit", disabled: o === "loading", className: "w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium rounded-lg transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed", children: o === "loading" ? "Signing in..." : "Sign in" })] }), e.jsx("div", { className: "mt-6 text-center", children: e.jsx(P, { to: "/admin/forgot-password", className: "text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 transition-colors", children: "Forgot your password?" }) })] }), e.jsx("div", { className: "text-center mt-8", children: e.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "© 2024 SnowCity. All rights reserved." }) })] }) }) } function xt() { const [a, s] = x.useState({ email: "" }), [t, r] = x.useState("idle"), [o, i] = x.useState(null), [p, m] = x.useState(null), g = async y => { if (y.preventDefault(), r("loading"), i(null), m(null), !a.email) { r("failed"), i("Email address is required"); return } try { await k.post("/api/admin/auth/forgot-password", { email: a.email }), r("success"), m("If an account with that email exists, we have sent you a password reset link.") } catch (l) { r("failed"), i((l == null ? void 0 : l.message) || "Failed to send reset email") } }; return t === "success" ? e.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 px-4", children: e.jsxs("div", { className: "w-full max-w-md", children: [e.jsxs("div", { className: "text-center mb-8", children: [e.jsx("div", { className: "inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-xl mb-4", children: e.jsx("svg", { className: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: e.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" }) }) }), e.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Check Your Email" }), e.jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-1", children: "We've sent you a password reset link" })] }), e.jsx("div", { className: "bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg p-8", children: e.jsxs("div", { className: "text-center space-y-4", children: [e.jsx("div", { className: "p-3 bg-green-50 border border-green-200 rounded-lg", children: e.jsx("p", { className: "text-sm text-green-600", children: p }) }), e.jsx("div", { className: "space-y-2", children: e.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Didn't receive the email? Check your spam folder or try again." }) }), e.jsxs("div", { className: "space-y-3", children: [e.jsx(P, { to: "/admin/login", className: "inline-block w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-center", children: "Back to Sign In" }), e.jsx("button", { onClick: () => { r("idle"), m(null), i(null) }, className: "inline-block w-full py-2 px-4 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 text-sm transition-colors", children: "Try a different email" })] })] }) })] }) }) : e.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 px-4", children: e.jsxs("div", { className: "w-full max-w-md", children: [e.jsxs("div", { className: "text-center mb-8", children: [e.jsx("div", { className: "inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-xl mb-4", children: e.jsx("svg", { className: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: e.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" }) }) }), e.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Reset Password" }), e.jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-1", children: "Enter your email to receive a reset link" })] }), e.jsxs("div", { className: "bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg p-8", children: [e.jsxs("form", { onSubmit: g, className: "space-y-6", children: [e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Email Address" }), e.jsx("input", { type: "email", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: a.email, onChange: y => s({ ...a, email: y.target.value }), placeholder: "Enter your email address", required: !0 }), e.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "We'll send a password reset link to this email" })] }), o && e.jsx("div", { className: "p-3 bg-red-50 border border-red-200 rounded-lg", children: e.jsx("p", { className: "text-sm text-red-600", children: o }) }), e.jsx("button", { type: "submit", disabled: t === "loading", className: "w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium rounded-lg transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed", children: t === "loading" ? "Sending Reset Link..." : "Send Reset Link" })] }), e.jsx("div", { className: "mt-6 text-center", children: e.jsx(P, { to: "/admin/login", className: "text-sm text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors", children: "← Back to Sign In" }) })] }), e.jsx("div", { className: "text-center mt-8", children: e.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "© 2024 SnowCity. All rights reserved." }) })] }) }) } function ht() { const [a] = We(), s = a.get("token"), [t, r] = x.useState({ password: "", confirmPassword: "" }), [o, i] = x.useState("idle"), [p, m] = x.useState(null), [g, y] = x.useState(null); if (!s) return e.jsx(C, { to: "/admin/login", replace: !0 }); const l = async d => { if (d.preventDefault(), i("loading"), m(null), y(null), !t.password) { i("failed"), m("Password is required"); return } if (t.password.length < 8) { i("failed"), m("Password must be at least 8 characters long"); return } if (t.password !== t.confirmPassword) { i("failed"), m("Passwords do not match"); return } try { await k.post("/api/admin/auth/reset-password", { token: s, newPassword: t.password }), i("success"), y("Your password has been reset successfully. You can now sign in with your new password.") } catch (v) { i("failed"), m((v == null ? void 0 : v.message) || "Failed to reset password. The link may have expired.") } }; return o === "success" ? e.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 px-4", children: e.jsxs("div", { className: "w-full max-w-md", children: [e.jsxs("div", { className: "text-center mb-8", children: [e.jsx("div", { className: "inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-xl mb-4", children: e.jsx("svg", { className: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: e.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" }) }) }), e.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Password Reset" }), e.jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-1", children: "Your password has been updated" })] }), e.jsx("div", { className: "bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg p-8", children: e.jsxs("div", { className: "text-center space-y-4", children: [e.jsx("div", { className: "p-3 bg-green-50 border border-green-200 rounded-lg", children: e.jsx("p", { className: "text-sm text-green-600", children: g }) }), e.jsx(P, { to: "/admin/login", className: "inline-block w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-center", children: "Sign In Now" })] }) })] }) }) : e.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 px-4", children: e.jsxs("div", { className: "w-full max-w-md", children: [e.jsxs("div", { className: "text-center mb-8", children: [e.jsx("div", { className: "inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-xl mb-4", children: e.jsx("svg", { className: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: e.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" }) }) }), e.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Set New Password" }), e.jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-1", children: "Enter your new password" })] }), e.jsxs("div", { className: "bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg p-8", children: [e.jsxs("form", { onSubmit: l, className: "space-y-6", children: [e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "New Password" }), e.jsx("input", { type: "password", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: t.password, onChange: d => r({ ...t, password: d.target.value }), placeholder: "Enter new password", required: !0 }), e.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Must be at least 8 characters long" })] }), e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Confirm New Password" }), e.jsx("input", { type: "password", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: t.confirmPassword, onChange: d => r({ ...t, confirmPassword: d.target.value }), placeholder: "Confirm new password", required: !0 })] }), p && e.jsx("div", { className: "p-3 bg-red-50 border border-red-200 rounded-lg", children: e.jsx("p", { className: "text-sm text-red-600", children: p }) }), e.jsx("button", { type: "submit", disabled: o === "loading", className: "w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium rounded-lg transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed", children: o === "loading" ? "Resetting Password..." : "Reset Password" })] }), e.jsx("div", { className: "mt-6 text-center", children: e.jsx(P, { to: "/admin/login", className: "text-sm text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors", children: "← Back to Sign In" }) })] }), e.jsx("div", { className: "text-center mt-8", children: e.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "© 2024 SnowCity. All rights reserved." }) })] }) }) } function yt() { var y; const [a, s] = x.useState({ status: "loading", error: null, form: { name: "", email: "", phone: "" }, saving: !1 }), [t, r] = x.useState({ form: { currentPassword: "", newPassword: "", confirmPassword: "" }, saving: !1, error: null, success: null }); x.useEffect(() => { (async () => { try { const l = await k.get("/api/admin/auth/profile"), d = (l == null ? void 0 : l.user) || {}; s(v => ({ ...v, status: "idle", form: { name: d.name || "", email: d.email || "", phone: d.phone || "" } })) } catch (l) { s(d => ({ ...d, status: "failed", error: l })) } })() }, []); const o = async l => { l.preventDefault(), s(d => ({ ...d, saving: !0 })); try { await k.patch("/api/users/me", a.form), alert("Profile updated successfully") } catch (d) { alert((d == null ? void 0 : d.message) || "Update failed") } finally { s(d => ({ ...d, saving: !1 })) } }, i = async l => { l.preventDefault(), r(f => ({ ...f, saving: !0, error: null, success: null })); const { currentPassword: d, newPassword: v, confirmPassword: R } = t.form; if (!d) { r(f => ({ ...f, saving: !1, error: "Current password is required" })); return } if (!v) { r(f => ({ ...f, saving: !1, error: "New password is required" })); return } if (v.length < 8) { r(f => ({ ...f, saving: !1, error: "Password must be at least 8 characters long" })); return } if (v !== R) { r(f => ({ ...f, saving: !1, error: "New passwords do not match" })); return } if (d === v) { r(f => ({ ...f, saving: !1, error: "New password must be different from current password" })); return } try { await k.post("/api/admin/auth/change-password", { currentPassword: d, newPassword: v }), r(f => ({ ...f, saving: !1, success: "Password changed successfully", form: { currentPassword: "", newPassword: "", confirmPassword: "" } })) } catch (f) { r(T => ({ ...T, saving: !1, error: (f == null ? void 0 : f.message) || "Failed to change password" })) } }, p = (l, d) => { r(v => ({ ...v, form: { ...v.form, [l]: d }, error: null, success: null })) }; if (a.status === "loading") return e.jsx("div", { className: "p-6 text-center", children: "Loading profile..." }); if (a.status === "failed") return e.jsx("div", { className: "p-6", children: e.jsx("div", { className: "text-red-600 bg-red-50 border border-red-200 rounded-lg p-4", children: ((y = a.error) == null ? void 0 : y.message) || "Failed to load profile" }) }); const m = a.form, g = t.form; return e.jsxs("div", { className: "max-w-4xl mx-auto p-6 space-y-8", children: [e.jsxs("div", { className: "mb-8", children: [e.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Account Settings" }), e.jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-1", children: "Manage your profile and security settings" })] }), e.jsxs("div", { className: "bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm", children: [e.jsxs("div", { className: "p-6 border-b border-gray-200 dark:border-gray-700", children: [e.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Profile Information" }), e.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: "Update your personal information" })] }), e.jsxs("form", { onSubmit: o, className: "p-6", children: [e.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Full Name" }), e.jsx("input", { type: "text", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: m.name, onChange: l => s(d => ({ ...d, form: { ...d.form, name: l.target.value } })), placeholder: "Enter your full name" })] }), e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Email Address" }), e.jsx("input", { type: "email", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: m.email, onChange: l => s(d => ({ ...d, form: { ...d.form, email: l.target.value } })), placeholder: "Enter your email address" })] }), e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Phone Number" }), e.jsx("input", { type: "tel", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: m.phone, onChange: l => s(d => ({ ...d, form: { ...d.form, phone: l.target.value } })), placeholder: "Enter your phone number" })] })] }), e.jsx("div", { className: "mt-6 flex justify-end", children: e.jsx("button", { type: "submit", disabled: a.saving, className: "px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg font-medium transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed", children: a.saving ? "Saving..." : "Save Changes" }) })] })] }), e.jsxs("div", { className: "bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm", children: [e.jsxs("div", { className: "p-6 border-b border-gray-200 dark:border-gray-700", children: [e.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Change Password" }), e.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: "Update your account password" })] }), e.jsxs("form", { onSubmit: i, className: "p-6", children: [t.error && e.jsx("div", { className: "mb-4 p-3 bg-red-50 border border-red-200 rounded-lg", children: e.jsx("p", { className: "text-sm text-red-600", children: t.error }) }), t.success && e.jsx("div", { className: "mb-4 p-3 bg-green-50 border border-green-200 rounded-lg", children: e.jsx("p", { className: "text-sm text-green-600", children: t.success }) }), e.jsxs("div", { className: "space-y-4", children: [e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Current Password" }), e.jsx("input", { type: "password", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: g.currentPassword, onChange: l => p("currentPassword", l.target.value), placeholder: "Enter your current password" })] }), e.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "New Password" }), e.jsx("input", { type: "password", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: g.newPassword, onChange: l => p("newPassword", l.target.value), placeholder: "Enter new password" }), e.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Must be at least 8 characters long" })] }), e.jsxs("div", { className: "space-y-2", children: [e.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Confirm New Password" }), e.jsx("input", { type: "password", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white transition-colors", value: g.confirmPassword, onChange: l => p("confirmPassword", l.target.value), placeholder: "Confirm new password" })] })] })] }), e.jsx("div", { className: "mt-6 flex justify-end", children: e.jsx("button", { type: "submit", disabled: t.saving, className: "px-6 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg font-medium transition-colors focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:cursor-not-allowed", children: t.saving ? "Changing Password..." : "Change Password" }) })] })] })] }) } const bt = c.lazy(() => u(() => import("./AdminsList-BclwbI9z.js"), __vite__mapDeps([0, 1, 2, 3, 4, 5, 6, 7, 8]))), ft = c.lazy(() => u(() => import("./AdminNew-CrF-9mro.js"), __vite__mapDeps([9, 1, 2, 3, 4, 5, 6, 7, 8]))), me = c.lazy(() => u(() => import("./AdminAccess-pyVk2b1Y.js"), __vite__mapDeps([10, 1, 2, 3, 4, 5, 6, 7, 8]))), kt = c.lazy(() => u(() => import("./Dashboard-BlR8VDhR.js"), __vite__mapDeps([11, 1, 2, 12, 13, 14, 15, 16, 17, 18, 19, 3, 4, 5, 6, 7, 8]))), jt = c.lazy(() => u(() => import("./BookingsList-18iL3r3L.js"), __vite__mapDeps([20, 1, 2, 21, 22, 23, 3, 4, 13, 14, 15, 16, 17, 5, 6, 7, 8]))), vt = c.lazy(() => u(() => import("./BookingDetails-Cj2AKFr8.js"), __vite__mapDeps([24, 1, 2, 3, 4, 5, 6, 7, 8]))), wt = c.lazy(() => u(() => import("./AttractionsList-B6jKCvJe.js"), __vite__mapDeps([25, 1, 2, 21, 26, 3, 4, 5, 6, 7, 8]))), ue = c.lazy(() => u(() => import("./AttractionForm-DlRixVUQ.js"), __vite__mapDeps([27, 1, 2, 28, 29, 30, 3, 4, 5, 6, 7, 8]))), _t = c.lazy(() => u(() => import("./SlotList-Brr6Colr.js"), __vite__mapDeps([31, 1, 2, 21, 3, 4, 5, 6, 7, 8]))), pe = c.lazy(() => u(() => import("./SlotForm-CHcad6YP.js"), __vite__mapDeps([32, 1, 2, 3, 4, 5, 6, 7, 8]))), Nt = c.lazy(() => u(() => import("./SlotBulk-D1sY0UeV.js"), __vite__mapDeps([33, 1, 2, 3, 4, 5, 6, 7, 8]))), At = c.lazy(() => u(() => import("./AddonsList-CbR4iCNl.js"), __vite__mapDeps([34, 1, 2, 21, 3, 4, 5, 6, 7, 8]))), ge = c.lazy(() => u(() => import("./AddonForm-DxRwZBYw.js"), __vite__mapDeps([35, 1, 2, 28, 29, 30, 3, 4, 5, 6, 7, 8]))), Et = c.lazy(() => u(() => import("./OffersList-CZqaesPw.js"), __vite__mapDeps([36, 1, 2, 21, 3, 4, 5, 6, 7, 8]))), xe = c.lazy(() => u(() => import("./OfferForm-DNv4zBeL.js"), __vite__mapDeps([37, 1, 2, 28, 29, 38, 3, 4, 5, 6, 7, 8]))), St = c.lazy(() => u(() => import("./CouponsList-sg6PaFxH.js"), __vite__mapDeps([39, 1, 2, 21, 22, 3, 4, 5, 6, 7, 8]))), he = c.lazy(() => u(() => import("./CouponForm-D6yzrLrU.js"), __vite__mapDeps([40, 1, 2, 3, 4, 5, 6, 7, 8]))), Pt = c.lazy(() => u(() => import("./BannersList-DMfKoLcR.js"), __vite__mapDeps([41, 1, 2, 21, 26, 3, 4, 5, 6, 7, 8]))), ye = c.lazy(() => u(() => import("./BannerForm-DhEwPk3G.js"), __vite__mapDeps([42, 1, 2, 28, 29, 30, 3, 4, 5, 6, 7, 8]))), Ct = c.lazy(() => u(() => import("./PagesList-C0PalV_t.js"), __vite__mapDeps([43, 1, 2, 3, 4, 5, 6, 7, 8]))), be = c.lazy(() => u(() => import("./PageForm-BOODTTMt.js"), __vite__mapDeps([44, 1, 2, 45, 28, 29, 38, 3, 4, 5, 6, 7, 8]))), Lt = c.lazy(() => u(() => import("./BlogsList-DRupU2o3.js"), __vite__mapDeps([46, 1, 2, 21, 29, 3, 4, 5, 6, 7, 8]))), fe = c.lazy(() => u(() => import("./BlogForm-CgLdBgDb.js"), __vite__mapDeps([47, 1, 2, 28, 29, 45, 30, 3, 4, 5, 6, 7, 8]))), Rt = c.lazy(() => u(() => import("./CombosList-DeLUrXPu.js"), __vite__mapDeps([48, 1, 2, 21, 3, 4, 5, 6, 7, 8]))), ke = c.lazy(() => u(() => import("./ComboForm-Cdc31qs9.js"), __vite__mapDeps([49, 1, 2, 28, 29, 3, 4, 5, 6, 7, 8]))), Tt = c.lazy(() => u(() => import("./AttractionSlotList-BjWijE1R.js"), __vite__mapDeps([50, 1, 2, 3, 4, 5, 6, 7, 8]))), It = c.lazy(() => u(() => import("./GalleryManager-GSoWOQp8.js"), __vite__mapDeps([51, 1, 2, 21, 29, 3, 4, 5, 6, 7, 8]))), je = c.lazy(() => u(() => import("./GalleryForm-ChYMPxWl.js"), __vite__mapDeps([52, 1, 2, 28, 29, 38, 3, 4, 5, 6, 7, 8]))), Dt = c.lazy(() => u(() => import("./ComboSlotList-BYVBh3ry.js"), __vite__mapDeps([53, 1, 2, 3, 4, 5, 6, 7, 8]))), ve = c.lazy(() => u(() => import("./ComboSlotForm-BQ9tkAIs.js"), __vite__mapDeps([54, 1, 2, 3, 4, 5, 6, 7, 8]))), Ot = c.lazy(() => u(() => import("./ComboSlotBulk-B4NCbEeT.js"), __vite__mapDeps([55, 1, 2, 3, 4, 5, 6, 7, 8]))), zt = c.lazy(() => u(() => import("./DynamicPricing-n-9DQ91C.js"), __vite__mapDeps([56, 1, 2, 3, 4, 5, 6, 7, 8]))), Bt = c.lazy(() => u(() => import("./UsersList-DcR8v2hB.js"), __vite__mapDeps([57, 1, 2, 21, 22, 3, 4, 5, 6, 7, 8]))), Mt = c.lazy(() => u(() => import("./UserEdit-D6ei1BBO.js"), __vite__mapDeps([58, 1, 2, 3, 4, 5, 6, 7, 8]))), Vt = c.lazy(() => u(() => import("./RolesList-CY2Ant9X.js"), __vite__mapDeps([59, 1, 2, 21, 3, 4, 5, 6, 7, 8]))), we = c.lazy(() => u(() => import("./RoleForm-Dv-4o6L4.js"), __vite__mapDeps([60, 1, 2, 3, 4, 5, 6, 7, 8]))), $t = c.lazy(() => u(() => import("./Overview-CYg4o62x.js"), __vite__mapDeps([61, 1, 2, 12, 3, 4, 5, 6, 7, 8]))), Ft = c.lazy(() => u(() => import("./Attractions-iFFe_gV7.js"), __vite__mapDeps([62, 1, 2, 13, 14, 15, 18, 19, 3, 4, 5, 6, 7, 8]))), qt = c.lazy(() => u(() => import("./Daily-Cdzu9T9u.js"), __vite__mapDeps([63, 1, 2, 13, 14, 15, 64, 19, 17, 16, 3, 4, 5, 6, 7, 8]))), Ut = c.lazy(() => u(() => import("./Custom-DD5QBqve.js"), __vite__mapDeps([65, 1, 2, 13, 14, 15, 16, 17, 3, 4, 5, 6, 7, 8]))), Ht = c.lazy(() => u(() => import("./People-BZFSrzEL.js"), __vite__mapDeps([66, 1, 2, 13, 14, 15, 16, 17, 3, 4, 5, 6, 7, 8]))), Wt = c.lazy(() => u(() => import("./Views-DT6nm9C9.js"), __vite__mapDeps([67, 1, 2, 13, 14, 15, 16, 17, 3, 4, 5, 6, 7, 8]))), Yt = c.lazy(() => u(() => import("./Split-BPH8P6RD.js"), __vite__mapDeps([68, 1, 2, 13, 14, 15, 64, 19, 17, 3, 4, 5, 6, 7, 8]))), Gt = c.lazy(() => u(() => import("./TopAttractions-C1wrjn7I.js"), __vite__mapDeps([69, 1, 2, 3, 4, 5, 6, 7, 8]))), Kt = c.lazy(() => u(() => import("./ConversionDashboard-BiRxslYY.js"), __vite__mapDeps([70, 1, 2, 12, 71, 3, 72, 5, 13, 14, 15, 64, 19, 17, 18, 73, 4, 6, 7, 8]))), Jt = c.lazy(() => u(() => import("./AttractionRevenue-uLVCplqd.js"), __vite__mapDeps([74, 1, 2, 23, 3, 4, 5, 6, 7, 8]))), Zt = c.lazy(() => u(() => import("./ComboRevenue-Bbid3sFp.js"), __vite__mapDeps([75, 1, 2, 23, 3, 4, 5, 6, 7, 8]))); function Qt({ children: a }) { return I(t => { var r; return (r = t.adminAuth) == null ? void 0 : r.token }) ? a : e.jsx(C, { to: "login", replace: !0 }) } function _e() { return e.jsx(c.Suspense, { fallback: e.jsx("div", { className: "p-4 text-sm", children: "Loading…" }), children: e.jsx(Ee, {}) }) } function Xt() { return e.jsxs(Ye, { children: [e.jsx(n, { path: "login", element: e.jsx(gt, {}) }), e.jsx(n, { path: "forgot-password", element: e.jsx(xt, {}) }), e.jsx(n, { path: "reset-password", element: e.jsx(ht, {}) }), e.jsx(n, { path: "/", element: e.jsx(Qt, { children: e.jsx(pt, {}) }), children: e.jsxs(n, { element: e.jsx(_e, {}), children: [e.jsx(n, { index: !0, element: e.jsx(kt, {}) }), e.jsx(n, { path: "profile", element: e.jsx(yt, {}) }), e.jsxs(n, { path: "analytics", element: e.jsx(_e, {}), children: [e.jsx(n, { index: !0, element: e.jsx(C, { to: "overview", replace: !0 }) }), e.jsx(n, { path: "overview", element: e.jsx($t, {}) }), e.jsx(n, { path: "attractions", element: e.jsx(Ft, {}) }), e.jsx(n, { path: "daily", element: e.jsx(qt, {}) }), e.jsx(n, { path: "custom", element: e.jsx(Ut, {}) }), e.jsx(n, { path: "people", element: e.jsx(Ht, {}) }), e.jsx(n, { path: "views", element: e.jsx(Wt, {}) }), e.jsx(n, { path: "split", element: e.jsx(Yt, {}) }), e.jsx(n, { path: "top-attractions", element: e.jsx(Gt, {}) }), e.jsx(n, { path: "conversion", element: e.jsx(Kt, {}) })] }), e.jsx(n, { path: "bookings", element: e.jsx(jt, {}) }), e.jsx(n, { path: "bookings/:id", element: e.jsx(vt, {}) }), e.jsx(n, { path: "catalog/attractions", element: e.jsx(wt, {}) }), e.jsx(n, { path: "catalog/attractions/new", element: e.jsx(ue, {}) }), e.jsx(n, { path: "catalog/attractions/:id", element: e.jsx(ue, {}) }), e.jsx(n, { path: "catalog/slots", element: e.jsx(_t, {}) }), e.jsx(n, { path: "catalog/slots/bulk", element: e.jsx(Nt, {}) }), e.jsx(n, { path: "catalog/slots/new", element: e.jsx(pe, {}) }), e.jsx(n, { path: "catalog/slots/:id", element: e.jsx(pe, {}) }), e.jsx(n, { path: "catalog/addons", element: e.jsx(At, {}) }), e.jsx(n, { path: "catalog/addons/new", element: e.jsx(ge, {}) }), e.jsx(n, { path: "catalog/addons/:id", element: e.jsx(ge, {}) }), e.jsx(n, { path: "catalog/offers", element: e.jsx(Et, {}) }), e.jsx(n, { path: "catalog/offers/new", element: e.jsx(xe, {}) }), e.jsx(n, { path: "catalog/offers/:id", element: e.jsx(xe, {}) }), e.jsx(n, { path: "catalog/dynamic-pricing", element: e.jsx(zt, {}) }), e.jsx(n, { path: "catalog/coupons", element: e.jsx(St, {}) }), e.jsx(n, { path: "catalog/coupons/new", element: e.jsx(he, {}) }), e.jsx(n, { path: "catalog/coupons/:id", element: e.jsx(he, {}) }), e.jsx(n, { path: "catalog/combo-slots", element: e.jsx(Dt, {}) }), e.jsx(n, { path: "catalog/combo-slots/new", element: e.jsx(ve, {}) }), e.jsx(n, { path: "catalog/combo-slots/:id", element: e.jsx(ve, {}) }), e.jsx(n, { path: "catalog/combo-slots/bulk", element: e.jsx(Ot, {}) }), e.jsx(n, { path: "catalog/attraction-slots", element: e.jsx(Tt, {}) }), e.jsx(n, { path: "catalog/banners", element: e.jsx(Pt, {}) }), e.jsx(n, { path: "catalog/banners/new", element: e.jsx(ye, {}) }), e.jsx(n, { path: "catalog/banners/:id", element: e.jsx(ye, {}) }), e.jsx(n, { path: "catalog/pages", element: e.jsx(Ct, {}) }), e.jsx(n, { path: "catalog/pages/new", element: e.jsx(be, {}) }), e.jsx(n, { path: "catalog/pages/:id", element: e.jsx(be, {}) }), e.jsx(n, { path: "catalog/blogs", element: e.jsx(Lt, {}) }), e.jsx(n, { path: "catalog/blogs/new", element: e.jsx(fe, {}) }), e.jsx(n, { path: "catalog/blogs/:id", element: e.jsx(fe, {}) }), e.jsx(n, { path: "catalog/combos", element: e.jsx(Rt, {}) }), e.jsx(n, { path: "catalog/combos/new", element: e.jsx(ke, {}) }), e.jsx(n, { path: "catalog/combos/:id", element: e.jsx(ke, {}) }), e.jsx(n, { path: "catalog/gallery", element: e.jsx(It, {}) }), e.jsx(n, { path: "catalog/gallery/new", element: e.jsx(je, {}) }), e.jsx(n, { path: "catalog/gallery/:id", element: e.jsx(je, {}) }), e.jsx(n, { path: "users", element: e.jsx(Bt, {}) }), e.jsx(n, { path: "users/:id", element: e.jsx(Mt, {}) }), e.jsx(n, { path: "roles", element: e.jsx(Vt, {}) }), e.jsx(n, { path: "roles/new", element: e.jsx(we, {}) }), e.jsx(n, { path: "roles/:id", element: e.jsx(we, {}) }), e.jsx(n, { path: "admins", element: e.jsx(bt, {}) }), e.jsx(n, { path: "admins/new", element: e.jsx(ft, {}) }), e.jsx(n, { path: "admins/access", element: e.jsx(me, {}) }), e.jsx(n, { path: "admins/:id/access", element: e.jsx(me, {}) }), e.jsx(n, { path: "revenue/attractions", element: e.jsx(Jt, {}) }), e.jsx(n, { path: "revenue/combos", element: e.jsx(Zt, {}) }), e.jsx(n, { path: "*", element: e.jsx(C, { to: ".", replace: !0 }) })] }) }), e.jsx(n, { path: "*", element: e.jsx(C, { to: "/admin", replace: !0 }) })] }) } class es extends x.Component { constructor(s) { super(s), this.state = { hasError: !1, error: null } } static getDerivedStateFromError(s) { return { hasError: !0, error: s } } componentDidCatch(s, t) { } render() { var s; return this.state.hasError ? e.jsxs("div", { className: "p-6 text-center", children: [e.jsx("h2", { className: "text-xl font-semibold mb-2", children: "Something went wrong" }), e.jsx("p", { className: "text-gray-600", children: ((s = this.state.error) == null ? void 0 : s.message) || "Unknown error" })] }) : this.props.children } } function as() { return e.jsx(Ge, { store: z, children: e.jsx(es, { children: e.jsx(c.Suspense, { fallback: e.jsx("div", { className: "p-6", children: "Loading admin…" }), children: e.jsx(Xt, {}) }) }) }) } const ds = Object.freeze(Object.defineProperty({ __proto__: null, default: as }, Symbol.toStringTag, { value: "Module" })); export { w as A, U as D, oe as T, k as a, ha as b, ua as c, pa as d, ca as e, ds as f, q as g, F as l, ma as p, xa as r, da as u };
