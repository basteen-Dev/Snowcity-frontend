import{C as b,r as i,j as e,L as m,g as j}from"./index-C5Mz9dTM.js";import{C as N}from"./circle-check-big-BKICz5jg.js";import{c as x}from"./createLucideIcon-DQ6FqzLt.js";import{C as l}from"./circle-alert-B_8ts0Q-.js";import{P as w,M as k}from"./phone-CKtjEWfK.js";import{R as v,E as C}from"./refresh-ccw-DUyB1j_-.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],P=x("circle-x",z);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],S=x("loader",R);function X(){const{search:r}=j();return i.useMemo(()=>new URLSearchParams(r),[r])}function E(){const r=X(),u=b(),[s,o]=i.useState("processing"),[t,h]=i.useState(0),[d,g]=i.useState(!1),n=r.get("order")||r.get("booking")||"Unknown",a=r.get("status");i.useEffect(()=>{a==="success"?(o("success"),localStorage.removeItem("pendingOrderData")):o(a==="failed"||a==="error"?"failed":a==="pending"?"pending":"processing")},[a]);const p=()=>{h(c=>c+1),t>=2?g(!0):u("/my-bookings")},f=()=>{const c=encodeURIComponent(`Payment Issue - Order ${n}`),y=encodeURIComponent(`I'm experiencing payment issues with order ${n}.

Status: ${a}
Retry attempts: ${t+1}

Please assist me with completing this booking.`);window.location.href=`mailto:support@snowcity.com?subject=${c}&body=${y}`};return e.jsx("div",{className:"min-h-[60vh] flex flex-col items-center justify-center p-4 bg-gradient-to-b from-[#e0f2fe] via-[#bae6fd] to-white",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 max-w-md w-full text-center",children:[s==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:e.jsx(N,{size:32,strokeWidth:2.5})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Confirmed!"}),e.jsxs("p",{className:"text-gray-600 mb-6 text-sm",children:["Thank you for your purchase. Your order ",e.jsxs("span",{className:"font-mono font-medium text-gray-800 bg-gray-100 px-1 rounded",children:["#",n]})," has been processed successfully."]})]}),s==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:e.jsx(P,{size:32,strokeWidth:2.5})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Failed"}),e.jsxs("p",{className:"text-gray-600 mb-6 text-sm",children:["We couldn't complete your transaction for order ",e.jsxs("span",{className:"font-mono font-medium text-gray-800 bg-gray-100 px-1 rounded",children:["#",n]}),".",t>0&&e.jsxs("span",{className:"text-red-600 font-medium",children:["(Attempt ",t+1,")"]})]}),d?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(l,{className:"text-red-600",size:20}),e.jsx("h4",{className:"font-semibold text-red-800",children:"Multiple Failed Attempts"})]}),e.jsxs("p",{className:"text-sm text-red-700 mb-3",children:["You've tried ",t+1," times without success. For your security and to protect your account, we recommend contacting our support team for assistance."]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(w,{size:16,className:"text-gray-600"}),e.jsx("span",{className:"font-medium",children:"Support: +91-XXXXXXXXXX"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(k,{size:16,className:"text-gray-600"}),e.jsx("span",{className:"font-medium",children:"support@snowcity.com"})]})]})]}):e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(l,{className:"text-amber-600",size:20}),e.jsx("h4",{className:"font-semibold text-amber-800",children:"Possible Reasons:"})]}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[e.jsx("li",{children:"• Insufficient funds or credit limit"}),e.jsx("li",{children:"• Incorrect card details or CVV"}),e.jsx("li",{children:"• Bank declined the transaction"}),e.jsx("li",{children:"• Network connectivity issues"}),e.jsx("li",{children:"• Payment gateway timeout"})]})]})})]}),(s==="processing"||s==="pending")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s==="pending"?e.jsx(l,{size:32}):e.jsx(S,{size:32,className:"animate-spin"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:s==="pending"?"Payment Pending":"Verifying..."}),e.jsxs("p",{className:"text-gray-600 mb-6 text-sm",children:["Please wait while we check the status of your order ",e.jsxs("span",{className:"font-mono font-medium text-gray-800",children:["#",n]}),"."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{to:"/my-bookings",className:"block w-full bg-blue-600 text-white font-semibold py-3.5 rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-200",children:"View Ticket & Orders"}),s==="failed"&&e.jsxs(e.Fragment,{children:[!d&&e.jsxs("button",{onClick:p,className:"w-full bg-orange-600 text-white font-semibold py-3.5 rounded-xl hover:bg-orange-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[e.jsx(v,{size:18}),t>0?`Try Again (${t+1}/3)`:"Try Again"]}),e.jsxs("button",{onClick:f,className:"w-full bg-white border border-gray-200 text-gray-700 font-medium py-3.5 rounded-xl hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(C,{size:18}),"Contact Support"]})]}),e.jsx(m,{to:"/",className:"block w-full text-gray-400 font-medium py-2 text-sm hover:text-gray-600 transition-colors",children:"Back to Home"})]})]})})}export{E as default};
