import{a1 as y}from"./index-D_x0VcQ4.js";function g(){var r,t;try{return((t=(r=y)==null?void 0:r.defaults)==null?void 0:t.baseURL)||""}catch{return""}}function o(r){if(!r)return"";if(/^https?:\/\//i.test(r))return r;const t=g();try{return r.startsWith("/")?t?new URL(r,t).toString():r:t?new URL(`/${r}`,t).toString():r}catch{return r}}function d(r){return r==null||r===""?"":o(`/api/uploads/${encodeURIComponent(String(r))}/raw`)}function p(r){if(typeof r!="string")return null;const t=r.trim();if(!t||!(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")))return null;try{return JSON.parse(t)}catch{return null}}const l=/^[0-9]+$/;function v(r){if(typeof r!="string")return null;const t=r.trim();return t&&l.test(t)?t:null}function u(r,t="",i=new Set){var c,a;if(!r)return t;if(typeof r=="string"){const n=p(r);if(n)return u(n,t,i)||t;const e=v(r);return e?d(e):o(r)||t}if(typeof r=="number")return d(r);if(Array.isArray(r)){for(const n of r){const e=u(n,t,i);if(e)return e}return t}if(typeof r!="object"||i.has(r))return t;i.add(r);const f=r.image_media_id??r.media_id??r.cover_media_id??r.banner_media_id??r.thumbnail_media_id??((c=r==null?void 0:r.media)==null?void 0:c.media_id)??((a=r==null?void 0:r.image)==null?void 0:a.media_id)??null;if(f)return d(f);const _=[r.gallery,r.images,r.media_items,r.media,r.cover,r.cover_image,r.cover_media];for(const n of _)if(Array.isArray(n))for(const e of n){if(!e||e===r)continue;const m=u(e,t,i);if(m)return m}else if(n&&n!==r){const e=u(n,t,i);if(e)return e}const s=r.url_path??r.media_url??r.url??r.image_url??r.cover_image??r.web_image??r.mobile_image??r.image??r.thumbnail??r.path??r.src??r.value??null;return(typeof s=="string"||Array.isArray(s)||typeof s=="object")&&u(s,t,i)||t}function A(r,t=""){return!r&&r!==0?t||"":u(r,t)||t||""}export{A as i,o as t};
