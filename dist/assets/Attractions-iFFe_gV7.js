import{R as o,D as a,j as e}from"./index-DpUnVvi7.js";import{a as x}from"./AdminApp-DElutmvv.js";import{R as h,T as g}from"./CategoricalChart-C8vF6RGu.js";import{P as u,a as b}from"./PieChart-zRVOrLmW.js";import{C as j}from"./tooltipContext-UWJEGs02.js";import"./createLucideIcon-DlloiUI2.js";import"./file-text-BcxeLTgw.js";import"./users-Dj4zQjFo.js";import"./newspaper-D6LH_a5a.js";import"./ticket-DJwTfedz.js";import"./chevron-down-BM4ufvPU.js";import"./clsx-B-dksMZM.js";import"./index-DTIaNHTc.js";const n=["#2563eb","#10b981","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#e11d48","#22c55e","#f97316","#3b82f6"];function I(){const[r,l]=o.useState(a().subtract(30,"day").startOf("day").toISOString()),[s,c]=o.useState(a().endOf("day").toISOString()),[i,m]=o.useState([]);o.useEffect(()=>{(async()=>{const t=await x.get("/api/admin/analytics/attractions-breakdown",{from:r,to:s,limit:50});m(Array.isArray(t)?t:[])})()},[r,s]);const p=`/api/admin/analytics/report.csv?type=attractions-breakdown&from=${encodeURIComponent(r)}&to=${encodeURIComponent(s)}`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{type:"datetime-local",className:"rounded-md border px-2 py-1 text-sm dark:bg-neutral-900 dark:border-neutral-700",value:a(r).format("YYYY-MM-DDTHH:mm"),onChange:t=>l(a(t.target.value).toISOString())}),e.jsx("input",{type:"datetime-local",className:"rounded-md border px-2 py-1 text-sm dark:bg-neutral-900 dark:border-neutral-700",value:a(s).format("YYYY-MM-DDTHH:mm"),onChange:t=>c(a(t.target.value).toISOString())}),e.jsx("a",{href:p,className:"ml-auto px-3 py-1 rounded-md border text-sm",children:"Download CSV"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-xl border bg-white dark:bg-neutral-900 border-gray-200 dark:border-neutral-800 p-3",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Attractions-wise Bookings"}),e.jsx("div",{style:{height:320},children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(u,{children:[e.jsx(b,{data:i,dataKey:"bookings",nameKey:"title",outerRadius:120,children:i.map((t,d)=>e.jsx(j,{fill:n[d%n.length]},d))}),e.jsx(g,{})]})})})]}),e.jsx("div",{className:"rounded-xl border bg-white dark:bg-neutral-900 border-gray-200 dark:border-neutral-800 p-3 overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-neutral-800",children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Attraction"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Bookings"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"People"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Revenue"})]})}),e.jsxs("tbody",{children:[i.map(t=>e.jsxs("tr",{className:"border-t dark:border-neutral-800",children:[e.jsx("td",{className:"px-3 py-2",children:t.title}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.bookings}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.people??0}),e.jsxs("td",{className:"px-3 py-2 text-right",children:["â‚¹ ",Number(t.revenue||0).toLocaleString()]})]},t.attraction_id)),!i.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-6 text-center text-gray-500 dark:text-neutral-400",colSpan:4,children:"No data"})})]})]})})]})]})}export{I as default};
