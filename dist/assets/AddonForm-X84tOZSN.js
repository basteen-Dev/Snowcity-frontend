import{C as b,B as g,R as x,j as t}from"./index-LUC8W6HM.js";import{a as o,A as c}from"./AdminApp-BAIHpeWj.js";import{I as f}from"./ImageUploader-4Q3V-48S.js";import"./createLucideIcon-BY9DOx5Q.js";import"./file-text-Bc3jcJvJ.js";import"./ticket-xkTq38T-.js";import"./media-Cid05Mxy.js";function _(){var u;const{id:n}=b(),m=g(),l=!!n,[s,a]=x.useState({status:l?"loading":"idle",error:null,form:{title:"",description:"",price:0,discount_percent:0,image_url:"",active:!0}});x.useEffect(()=>{l&&(async()=>{try{const r=await o.get(`${c.addons()}/${n}`),e=(r==null?void 0:r.addon)||r||{};a(i=>({...i,status:"idle",form:{title:e.title||"",description:e.description||"",price:e.price||0,discount_percent:e.discount_percent||0,image_url:e.image_url||"",active:!!e.active}}))}catch(r){a(e=>({...e,status:"failed",error:r}))}})()},[n,l]);const p=async r=>{r.preventDefault();try{const e={...s.form,price:Number(s.form.price||0),discount_percent:Number(s.form.discount_percent||0)};l?await o.put(`${c.addons()}/${n}`,e):await o.post(c.addons(),e),m("/admin/catalog/addons")}catch(e){a(i=>({...i,error:e}))}};if(s.status==="loading")return t.jsx("div",{children:"Loadingâ€¦"});if(s.status==="failed")return t.jsx("div",{className:"text-red-600",children:((u=s.error)==null?void 0:u.message)||"Failed to load"});const d=s.form;return t.jsxs("form",{onSubmit:p,className:"max-w-2xl bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-4",children:[t.jsxs("h1",{className:"text-xl font-semibold mb-4",children:[l?"Edit":"New"," Addon"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-neutral-300 mb-1",children:"Title"}),t.jsx("input",{className:"w-full rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:d.title,onChange:r=>a(e=>({...e,form:{...e.form,title:r.target.value}}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-neutral-300 mb-1",children:"Price"}),t.jsx("input",{type:"number",className:"w-full rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:d.price,onChange:r=>a(e=>({...e,form:{...e.form,price:Number(r.target.value||0)}}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-neutral-300 mb-1",children:"Discount %"}),t.jsx("input",{type:"number",className:"w-full rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:d.discount_percent,onChange:r=>a(e=>({...e,form:{...e.form,discount_percent:Number(r.target.value||0)}}))})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-neutral-300 mb-1",children:"Description"}),t.jsx("textarea",{rows:4,className:"w-full rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:d.description,onChange:r=>a(e=>({...e,form:{...e.form,description:r.target.value}}))})]}),t.jsx("div",{className:"md:col-span-2",children:t.jsx(f,{label:"Image",value:d.image_url,onChange:r=>a(e=>({...e,form:{...e.form,image_url:r}})),folder:"addons",requiredPerm:"uploads:write"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{id:"active",type:"checkbox",checked:!!d.active,onChange:r=>a(e=>({...e,form:{...e.form,active:r.target.checked}}))}),t.jsx("label",{htmlFor:"active",className:"text-sm text-gray-700 dark:text-neutral-200",children:"Active"})]})]}),t.jsxs("div",{className:"mt-4 flex gap-2",children:[t.jsx("button",{type:"submit",className:"rounded-md bg-gray-900 text-white px-4 py-2 text-sm",children:"Save"}),t.jsx("button",{type:"button",className:"rounded-md border px-4 py-2 text-sm",onClick:()=>m(-1),children:"Cancel"})]})]})}export{_ as default};
