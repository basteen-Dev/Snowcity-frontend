import{h as _,G as v,u as j,R as b,z as m,j as e,A as N}from"./index-LUC8W6HM.js";import{E as w}from"./ErrorState-Cs2zbpJ5.js";import{i as d}from"./media-Cid05Mxy.js";function R(){var u;const n=_(),[c]=v(),r=j(t=>t.gallery),f=c.get("target_type"),h=c.get("target_ref_id"),g=c.get("attraction"),s=f||(g?"attraction":null),i=h||g;b.useEffect(()=>{const t={active:!0,limit:100};s&&(t.target_type=s),i&&(t.target_ref_id=i);const a=r.filters,o=!a||a.target_type!==t.target_type||a.target_ref_id!==t.target_ref_id;(r.status==="idle"||o)&&n(m(t))},[n,r.status,r.filters,s,i]);const l=r.items||[],p=()=>{var t;if(s==="attraction"&&l.length>0){const a=(t=l[0])==null?void 0:t.target_name;return a?`${a} Gallery`:"Attraction Gallery"}return"Gallery"},x=()=>{var t;if(s==="attraction"){const a=(t=l[0])==null?void 0:t.target_name;return a?`Explore photos and videos from the ${a} experience at SnowCity.`:"Explore photos and videos from this attraction at SnowCity."}return"Peek into the SnowCity experience with photos and short clips from our visitors."};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#e0f2fe] via-[#bae6fd] to-white",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-10",children:[e.jsxs("header",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-semibold",children:p()}),e.jsx("p",{className:"text-gray-600 mt-2",children:x()})]}),r.status==="loading"&&!l.length?e.jsx(N,{}):null,r.status==="failed"?e.jsx(w,{message:((u=r.error)==null?void 0:u.message)||"Failed to load gallery",onRetry:()=>{const t={active:!0,limit:100};s&&(t.target_type=s),i&&(t.target_ref_id=i),n(m(t))}}):null,e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:l.map(t=>{const a=String(t.media_type||"").toLowerCase()==="video",o=a?d(t.media_url||t.url||t):d(t.image_url||t.url||t),y=d(t.thumbnail||t.poster_url||null);return o?e.jsxs("figure",{className:"group relative overflow-hidden rounded-2xl border shadow-sm bg-white",children:[a?e.jsx("video",{className:"w-full h-56 object-cover",src:o,controls:!0,preload:"metadata",poster:y||void 0}):e.jsx("img",{src:o,alt:t.title||"Gallery item",className:"w-full h-56 object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy",decoding:"async"}),t.title||t.description||t.target_name?e.jsxs("figcaption",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent p-4 text-sm text-white",children:[t.title?e.jsx("div",{className:"font-medium",children:t.title}):null,t.target_name?e.jsx("div",{className:"text-xs opacity-90",children:t.target_name}):null,t.description?e.jsx("div",{className:"text-xs opacity-80 mt-1",children:t.description}):null]}):null]},t.gallery_item_id||t.id):null})}),!l.length&&r.status==="succeeded"?e.jsx("div",{className:"py-16 text-center text-gray-500",children:s==="attraction"?"We don't have gallery images for this attraction yet.":"We'll be adding gallery highlights soon!"}):null]})})}export{R as default};
