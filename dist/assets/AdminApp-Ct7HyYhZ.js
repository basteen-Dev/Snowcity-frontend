const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminsList-Cvq4Xrv2.js","assets/index-D_x0VcQ4.js","assets/index-86co8c4s.css","assets/createLucideIcon-CDLCmtzs.js","assets/file-text-B8djhIpu.js","assets/ticket-5vjBYnJB.js","assets/AdminNew-D7TrdZnG.js","assets/AdminAccess-T4xTjI_v.js","assets/Dashboard-D2SPbn-l.js","assets/formatters-CmiLqhJj.js","assets/CategoricalChart-C0B7JwUA.js","assets/clsx-B-dksMZM.js","assets/index-BGaTdwbE.js","assets/LineChart-BfcW9OV9.js","assets/CartesianChart-DxqQttRi.js","assets/PieChart-DYAyDciQ.js","assets/tooltipContext-BM-wlyer.js","assets/BookingsList-C00Rgmyf.js","assets/AdminTable-Ca_eHIx7.js","assets/AdminPagination-DJF8ehAL.js","assets/file-spreadsheet-CnCPFbD5.js","assets/BookingDetails-DoxbG0UD.js","assets/AttractionsList-Bgcm_rYG.js","assets/sortable.esm-Cn23dvXL.js","assets/AttractionForm-BL4AZhoy.js","assets/ImageUploader-Bek_Wt90.js","assets/media-DZA-bGGk.js","assets/SlotList-BflW8LV8.js","assets/SlotForm-Cv-_LDUK.js","assets/SlotBulk-VimQRzRh.js","assets/AddonsList-DaA7WYTT.js","assets/AddonForm-C0tL9SUN.js","assets/OffersList-B0ujgnW8.js","assets/OfferForm-BdC3_JjR.js","assets/useCatalogTargets-DLwquza0.js","assets/CouponsList-BVZds8Db.js","assets/CouponForm-DLrB-jkj.js","assets/BannersList-BgOkozqp.js","assets/BannerForm-B2ah9eD6.js","assets/PagesList-DPZtp2pz.js","assets/PageForm-CLA8RAIT.js","assets/GalleryField-CteEzIYn.js","assets/BlogsList-jhYqXXUi.js","assets/BlogForm-_3sJHCxM.js","assets/CombosList-BOX72Wuh.js","assets/ComboForm-CmYF0lWZ.js","assets/AttractionSlotList-UYrMl3uN.js","assets/GalleryManager-D_q7DFUK.js","assets/GalleryForm-DQ_XV49-.js","assets/ComboSlotList-BJ3BuzKm.js","assets/ComboSlotForm-Bind13rc.js","assets/ComboSlotBulk-Dt3Gqrzg.js","assets/UsersList-DM9hirFE.js","assets/UserEdit-_VVMjgvD.js","assets/RolesList-CVEakMfU.js","assets/RoleForm-EmbY5Y-u.js","assets/Overview-vLOBQCkO.js","assets/Attractions-BIlIwAXa.js","assets/Daily-CAkN25LU.js","assets/BarChart-Cm_fmZS-.js","assets/Custom-Dhwy8E4X.js","assets/People-C_ZieroU.js","assets/Views-Bi3iFGtF.js","assets/Split-DTkw2xXt.js","assets/TopAttractions-CRFmSDTU.js","assets/AttractionRevenue-D_Lc2yxg.js","assets/ComboRevenue-BnhmtHke.js"])))=>i.map(i=>d[i]);
import{c as F,a as ze,e as h,b as j,d as Be,f as Ve,u as R,s as ve,R as y,g as $e,j as t,L as $,N as Fe,h as q,i as qe,k as Ue,O as Ae,l as S,m as He,n as o,r,_ as l,P as Ge}from"./index-D_x0VcQ4.js";import{c as b}from"./createLucideIcon-CDLCmtzs.js";import{F as Z,C as We}from"./file-text-B8djhIpu.js";import{T as Ye}from"./ticket-5vjBYnJB.js";const Ke={user:null,token:null,expires_at:null,checked:!1,perms:[]},we=F({name:"adminAuth",initialState:Ke,reducers:{setAdminCredentials(e,s){const{user:a,token:n,expires_at:i}=s.payload||{};e.user=a||null,e.token=n||null,e.expires_at=i||null,e.checked=!0},setAdminPermissions(e,s){e.perms=Array.isArray(s.payload)?s.payload:[]},adminLogout(e){e.user=null,e.token=null,e.expires_at=null,e.checked=!0,e.perms=[]}}}),{setAdminCredentials:Je,setAdminPermissions:Q,adminLogout:U}=we.actions,Ze=we.reducer,M={},Qe=(M==null?void 0:M.VITE_ADMIN_API_BASE_URL)||"https://snowcity-backend-zjlj.onrender.com",E=ze.create({baseURL:Qe,timeout:2e4,withCredentials:!1,headers:{"Content-Type":"application/json",Accept:"application/json"}});let H=null,N={getToken:()=>H,onUnauthorized:null};function Ee(e){H=e||null}function Xe({getToken:e,onUnauthorized:s}={}){typeof e=="function"&&(N.getToken=e),typeof s=="function"&&(N.onUnauthorized=s)}const et=e=>{var n;const s=e==null?void 0:e.code;return!((n=e==null?void 0:e.response)==null?void 0:n.status)&&(s==="ECONNABORTED"||s==="ERR_NETWORK"||s==="ENETUNREACH"||s==="EAI_AGAIN")},tt=e=>{var c;const s=e==null?void 0:e.response,a=s==null?void 0:s.data,n=(s==null?void 0:s.status)||0,i=(a==null?void 0:a.message)||(a==null?void 0:a.error)||(e==null?void 0:e.message)||"Request failed",d=(a==null?void 0:a.code)||((c=s==null?void 0:s.headers)==null?void 0:c["x-error-code"])||(e==null?void 0:e.code)||null;return{message:i,status:n,code:d,data:typeof a=="object"?a:null}};E.interceptors.request.use(e=>{e.headers=e.headers||{};const s=N.getToken&&N.getToken()||H;return s&&(e.headers.Authorization=`Bearer ${s}`),e});E.interceptors.response.use(e=>e,async e=>{var n;const s=(e==null?void 0:e.config)||{},a=(n=e==null?void 0:e.response)==null?void 0:n.status;if(s.method==="get"&&!s._retry&&et(e)){s._retry=!0;try{return await E(s)}catch(i){e=i}}if(a===401&&typeof N.onUnauthorized=="function")try{await N.onUnauthorized()}catch{}return Promise.reject(tt(e))});const _={async get(e,s={}){const{fullResponse:a=!1,...n}=s,i=await E.get(e,n);return a?i:i.data},async post(e,s,a={}){const{fullResponse:n=!1,...i}=a,d=await E.post(e,s,i);return n?d:d.data},async put(e,s,a={}){const{fullResponse:n=!1,...i}=a,d=await E.put(e,s,i);return n?d:d.data},async patch(e,s,a={}){const{fullResponse:n=!1,...i}=a,d=await E.patch(e,s,i);return n?d:d.data},async delete(e,s={}){const{fullResponse:a=!1,...n}=s,i=await E.delete(e,n);return a?i:i.data},async upload(e,s,a={}){const n=new FormData;return n.append("file",s),Object.entries(a).forEach(([d,m])=>n.append(d,m)),(await E.post(e,n,{headers:{"Content-Type":"multipart/form-data"}})).data}},f={root:()=>"/api/admin",dashboard:()=>"/api/admin/dashboard",dashboardRecent:()=>"/api/admin/dashboard/recent-bookings",dashboardTopAttractions:()=>"/api/admin/dashboard/top-attractions",dashboardStatus:()=>"/api/admin/dashboard/status-breakdown",dashboardTrend:()=>"/api/admin/dashboard/trend",bookings:()=>"/api/admin/bookings",bookingById:e=>`/api/admin/bookings/${h(e)}`,bookingCancel:e=>`/api/admin/bookings/${h(e)}/cancel`,bookingResendTicket:e=>`/api/admin/bookings/${h(e)}/resend-ticket`,bookingResendWhatsApp:e=>`/api/admin/bookings/${h(e)}/resend-whatsapp`,bookingResendEmail:e=>`/api/admin/bookings/${h(e)}/resend-email`,payphiStatus:e=>`/api/admin/bookings/${h(e)}/pay/payphi/status`,payphiInitiate:e=>`/api/admin/bookings/${h(e)}/pay/payphi/initiate`,payphiRefund:e=>`/api/admin/bookings/${h(e)}/pay/payphi/refund`,attractions:()=>"/api/admin/attractions",attractionById:e=>`/api/admin/attractions/${h(e)}`,slots:()=>"/api/admin/slots",slotsBulk:()=>"/api/admin/slots/bulk",slotById:e=>`/api/admin/slots/${h(e)}`,addons:()=>"/api/admin/addons",coupons:()=>"/api/admin/coupons",offers:()=>"/api/admin/offers",combos:()=>"/api/admin/combos",comboById:e=>`/api/admin/combos/${h(e)}`,comboSlots:()=>"/api/admin/combo-slots",comboSlotById:e=>`/api/admin/combo-slots/${h(e)}`,comboSlotsBulk:()=>"/api/admin/combo-slots/bulk",blogs:()=>"/api/admin/blogs",blogById:e=>`/api/admin/blogs/${h(e)}`,blogPreview:()=>"/api/admin/blogs/preview",pages:()=>"/api/admin/pages",pageById:e=>`/api/admin/pages/${h(e)}`,pagePreview:()=>"/api/admin/pages/preview",gallery:()=>"/api/admin/gallery",galleryById:e=>`/api/admin/gallery/${h(e)}`,galleryDelete:e=>`/api/admin/gallery/${h(e)}`,galleryBulkDelete:()=>"/api/admin/gallery/bulk-delete",banners:()=>"/api/admin/banners",bannerById:e=>`/api/admin/banners/${h(e)}`,bannersReorder:()=>"/api/admin/banners/reorder",users:()=>"/api/admin/users",userById:e=>`/api/admin/users/${h(e)}`,settings:()=>"/api/admin/settings",settingKey:e=>`/api/admin/settings/${h(e)}`,notifications:()=>"/api/admin/notifications",notificationById:e=>`/api/admin/notifications/${h(e)}`,holidays:()=>"/api/admin/holidays",holidayById:e=>`/api/admin/holidays/${h(e)}`,happyHours:()=>"/api/admin/happy-hours",happyHourById:e=>`/api/admin/happy-hours/${h(e)}`,roles:()=>"/api/admin/roles",roleById:e=>`/api/admin/roles/${h(e)}`,rolePerms:e=>`/api/admin/roles/${h(e)}/permissions`,permissions:()=>"/api/admin/permissions",permissionById:e=>`/api/admin/permissions/${h(e)}`,analyticsOverview:()=>"/api/admin/analytics/overview",analyticsTrend:()=>"/api/admin/analytics/trend",analyticsTopAttractions:()=>"/api/admin/analytics/top-attractions",analyticsAttractionRevenue:()=>"/api/admin/analytics/attraction-revenue",analyticsComboRevenue:()=>"/api/admin/analytics/combo-revenue",analyticsReport:(e="csv")=>`/api/admin/analytics/report.${e}`,analytics:()=>"/api/admin/analytics"},at=(e,s)=>e&&typeof e=="object"?{message:e.message||s,status:e.status||0,code:e.code||null}:{message:String(e||s)},D=j("adminDashboard/fetchDashboard",async(e,{rejectWithValue:s})=>{try{const[a,n,i,d]=await Promise.all([_.get(f.dashboard()),_.get(f.dashboardRecent()),_.get(f.dashboardTopAttractions()),_.get(f.dashboardStatus())]);return{main:a,recent:n,top:i,status:d}}catch(a){return s(a)}}),st=F({name:"adminDashboard",initialState:{data:null,status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(D.pending,s=>{s.status="loading",s.error=null}),e.addCase(D.fulfilled,(s,a)=>{s.status="succeeded",s.data=a.payload}),e.addCase(D.rejected,(s,a)=>{s.status="failed",s.error=at(a.payload||a.error,"Failed to load dashboard")})}}),nt=st.reducer,z=(e,s)=>e&&typeof e=="object"?{message:e.message||s,status:e.status||0,code:e.code||null}:{message:String(e||s)},B=j("adminBookings/list",async(e={page:1,limit:20},{rejectWithValue:s})=>{try{const a=await _.get(f.bookings(),{params:e});return{data:Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a)?a:[],meta:(a==null?void 0:a.meta)||null,query:e}}catch(a){return s(a)}}),V=j("adminBookings/getOne",async({id:e},{rejectWithValue:s})=>{try{const a=await _.get(f.bookingById(e));return(a==null?void 0:a.booking)||a}catch(a){return s(a)}}),ot=j("adminBookings/update",async({id:e,patch:s},{rejectWithValue:a})=>{try{const n=await _.put(f.bookingById(e),s);return(n==null?void 0:n.booking)||n}catch(n){return a(n)}}),it=j("adminBookings/cancel",async({id:e},{rejectWithValue:s})=>{try{const a=await _.post(f.bookingCancel(e));return(a==null?void 0:a.booking)||a}catch(a){return s(a)}}),rt=j("adminBookings/payphiStatus",async({id:e},{rejectWithValue:s})=>{try{const a=await _.get(f.payphiStatus(e));return{id:e,...a}}catch(a){return s(a)}}),lt=j("adminBookings/payphiInitiate",async({id:e,email:s,mobile:a},{rejectWithValue:n})=>{try{const i=await _.post(f.payphiInitiate(e),{email:s,mobile:a});return{id:e,...i}}catch(i){return n(i)}}),dt=j("adminBookings/payphiRefund",async({id:e,amount:s,newMerchantTxnNo:a},{rejectWithValue:n})=>{try{const i=await _.post(f.payphiRefund(e),{amount:s,newMerchantTxnNo:a});return{id:e,...i}}catch(i){return n(i)}}),ct=j("adminBookings/resendTicket",async({id:e},{rejectWithValue:s})=>{try{const a=await _.post(f.bookingResendTicket(e));return{id:e,...a}}catch(a){return s(a)}}),mt=j("adminBookings/resendWhatsApp",async({id:e},{rejectWithValue:s})=>{try{const a=await _.post(f.bookingResendWhatsApp(e));return{id:e,...a}}catch(a){return s(a)}}),pt=j("adminBookings/resendEmail",async({id:e},{rejectWithValue:s})=>{try{const a=await _.post(f.bookingResendEmail(e));return{id:e,...a}}catch(a){return s(a)}}),ut=F({name:"adminBookings",initialState:{list:{status:"idle",data:[],meta:null,error:null,query:{page:1,limit:20}},current:{status:"idle",data:null,error:null},action:{status:"idle",error:null}},reducers:{},extraReducers:e=>{e.addCase(B.pending,s=>{s.list.status="loading",s.list.error=null}),e.addCase(B.fulfilled,(s,a)=>{s.list.status="succeeded",s.list.data=a.payload.data,s.list.meta=a.payload.meta,s.list.query=a.payload.query}),e.addCase(B.rejected,(s,a)=>{s.list.status="failed",s.list.error=z(a.payload||a.error,"Failed to load bookings")}),e.addCase(V.pending,s=>{s.current.status="loading",s.current.error=null,s.current.data=null}),e.addCase(V.fulfilled,(s,a)=>{s.current.status="succeeded",s.current.data=a.payload}),e.addCase(V.rejected,(s,a)=>{s.current.status="failed",s.current.error=z(a.payload||a.error,"Failed to load booking")});for(const s of[ot,it,rt,lt,dt,ct,mt,pt])e.addCase(s.pending,a=>{a.action.status="loading",a.action.error=null}),e.addCase(s.fulfilled,a=>{a.action.status="succeeded"}),e.addCase(s.rejected,(a,n)=>{a.action.status="failed",a.action.error=z(n.payload||n.error,"Action failed")})}}),ht=ut.reducer,X=!1,I="sc_admin_auth",yt=e=>{try{return JSON.parse(e)}catch{return null}},xt=()=>{const e=localStorage.getItem(I);if(!e)return;const s=yt(e);if(s!=null&&s.expires_at){const a=new Date(s.expires_at).getTime();if(Number.isFinite(a)&&Date.now()>=a){localStorage.removeItem(I);return}}return s},gt=e=>{if(!e||!e.token){localStorage.removeItem(I);return}localStorage.setItem(I,JSON.stringify({user:e.user||null,token:e.token,expires_at:e.expires_at||null}))},Ne=Ve();Ne.startListening({predicate:e=>e.type==="adminAuth/setAdminCredentials"||e.type==="adminAuth/adminLogout",effect:(e,s)=>{var n;const a=e.type==="adminAuth/setAdminCredentials"&&((n=e.payload)==null?void 0:n.token)||null;Ee(a),gt(s.getState().adminAuth)}});const L={adminAuth:xt()},T=Be({reducer:{adminAuth:Ze,adminDashboard:nt,adminBookings:ht},preloadedState:L,middleware:e=>e({serializableCheck:{warnAfter:64},immutableCheck:X}).prepend(Ne.middleware),devTools:X});var je;Ee(((je=L==null?void 0:L.adminAuth)==null?void 0:je.token)||null);Xe({getToken:()=>{var e;return((e=T.getState().adminAuth)==null?void 0:e.token)||null},onUnauthorized:async()=>{var s;((s=T.getState().adminAuth)==null?void 0:s.token)&&T.dispatch(U())}});/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],kt=b("badge-percent",bt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ft=b("bell",_t);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],vt=b("boxes",jt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],wt=b("building-2",At);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],Nt=b("calendar-clock",Et);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Rt=b("calendar",St);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Lt=b("chart-column",Ct);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],It=b("clock-3",Tt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ee=b("dollar-sign",Ot);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mt=b("eye",Pt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],te=b("gift",Dt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ae=b("image",zt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Vt=b("key-round",Bt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ft=b("layout-dashboard",$t);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],Ut=b("newspaper",qt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gt=b("search",Ht);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Yt=b("shield-check",Wt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["path",{d:"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3",key:"lubmu8"}],["path",{d:"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3",key:"1ag34g"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Jt=b("square-split-horizontal",Kt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Qt=b("trending-up",Zt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ea=b("user-cog",Xt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],se=b("users",ta),aa=Object.freeze([]),sa=Object.freeze([]),na=e=>{const s=e.adminAuth||{},a=s.user||null;return{perms:Array.isArray(s.perms)?s.perms:aa,roles:Array.isArray(a==null?void 0:a.roles)?a.roles:sa,userId:(a==null?void 0:a.user_id)??(a==null?void 0:a.id)??null}};function oa({anyOf:e=[],allOf:s=[],children:a,fallback:n=null}){const{perms:i,roles:d,userId:m}=R(na,ve),c=y.useMemo(()=>new Set(d.map(k=>String(k).toLowerCase())),[d]);if(m!=null&&Number(m)===1||c.has("root")||c.has("superadmin"))return a;const g=s.length?s.every(k=>i.includes(k)):!0,x=e.length?e.some(k=>i.includes(k)):!0;return g&&x?a:n||null}const ia="group relative flex items-center gap-3 px-3 py-2 rounded-xl text-sm transition-colors",ne="sc_admin_sidebar_open_sections";function ra(e){return e?typeof e=="string"?e.toLowerCase().trim():String(e.role_name||e.name||e).toLowerCase().trim():""}function la(e){const[s,a]=y.useState(()=>{try{const d=localStorage.getItem(ne);if(!d)return e;const m=JSON.parse(d);return typeof m=="object"&&m?{...e,...m}:e}catch{return e}}),n=y.useCallback(d=>{a(d);try{localStorage.setItem(ne,JSON.stringify(d))}catch{}},[]),i=y.useCallback((d,m)=>{n({...s,[d]:!!m})},[s,n]);return[s,i]}const da=Object.freeze([]),ca=Object.freeze([]),ma=e=>{const s=e.adminAuth||{},a=s.user||null;return{roles:Array.isArray(a==null?void 0:a.roles)?a.roles:da,perms:Array.isArray(s.perms)?s.perms:ca,userId:(a==null?void 0:a.user_id)??(a==null?void 0:a.id)??null}};function oe({collapsed:e,onClose:s}){const a=$e(),{roles:n,perms:i,userId:d}=R(ma,ve),m=y.useMemo(()=>(n||[]).map(ra),[n]),c=y.useMemo(()=>new Set((i||[]).map(u=>String(u).toLowerCase().trim())),[i]),g=d!=null&&Number(d)===1||m.includes("root")||m.includes("superadmin")||c.has("admin-management:manage")||c.has("admin-management:write")||c.has("admin-management:read")||c.has("admins:manage")||c.has("admins:write")||c.has("admins:read"),x=()=>{typeof s=="function"&&s()},[k,Te]=y.useState(""),O=y.useMemo(()=>{const u=[{key:"Dashboard",label:"Overview",items:[{to:"/admin",end:!0,label:"Executive Dashboard",icon:Ft}]},{key:"Analytics",label:"Analytics",items:[{to:"/admin/analytics/overview",label:"Overview",icon:Lt},{to:"/admin/analytics/attractions",label:"Attractions",icon:wt},{to:"/admin/analytics/daily",label:"Daily Trend",icon:Qt},{to:"/admin/analytics/split",label:"Split Analysis",icon:Jt},{to:"/admin/analytics/custom",label:"Custom Report",icon:Z},{to:"/admin/analytics/people",label:"People",icon:se},{to:"/admin/analytics/views",label:"Views",icon:Mt},{to:"/admin/revenue/attractions",label:"Attraction Revenue",icon:ee},{to:"/admin/revenue/combos",label:"Combo Revenue",icon:ee}]},{key:"Bookings",label:"Bookings",items:[{to:"/admin/bookings",label:"All Bookings",icon:Nt},{to:"/admin/bookings/calendar",label:"Booking Calendar",icon:Rt},{to:"/admin/bookings/slots",label:"Time Slots",icon:It}]},{key:"Catalog",label:"Catalog",items:[{to:"/admin/catalog/attractions",label:"Attractions",icon:te},{to:"/admin/catalog/addons",label:"Add-ons",icon:te},{to:"/admin/catalog/combos",label:"Combos",icon:vt},{to:"/admin/catalog/offers",label:"Offers",icon:kt},{to:"/admin/catalog/coupons",label:"Coupons",icon:Ye},{to:"/admin/catalog/banners",label:"Banners",icon:ae},{to:"/admin/catalog/gallery",label:"Gallery",icon:ae},{to:"/admin/catalog/pages",label:"Pages",icon:Z},{to:"/admin/catalog/blogs",label:"Blogs",icon:Ut}]},...m.includes("subadmin")&&!m.includes("admin")&&!m.includes("root")&&!m.includes("superadmin")?[]:[{key:"AdminManagement",label:"People",items:[{to:"/admin/users",label:"Customers",icon:se},{to:"/admin/roles",label:"Admin Roles",icon:Yt},...g?[{to:"/admin/admins",label:"Admin Team",icon:ea,permsAny:["admin-management:read"]},{to:"/admin/admins/access",label:"Grant Access",icon:Vt,permsAny:["admin-management:write","admin-management:manage"]}]:[]]}]];if(k.trim()==="")return u;const v=k.trim().toLowerCase();return u.map(A=>{const w=A.items.filter(C=>C.label.toLowerCase().includes(v));return w.length?{...A,items:w}:null}).filter(Boolean)},[g,k]),Ie=y.useMemo(()=>({Dashboard:!0,Analytics:!1,Bookings:!0,Catalog:!0,AdminManagement:!0,UsersRBAC:!1}),[]),[P,G]=la(Ie);y.useEffect(()=>{const u=a.pathname||"";for(const v of O)v.items.some(w=>u.startsWith(w.to))&&!P[v.key]&&G(v.key,!0)},[a.pathname,O]);const Oe=u=>G(u,!P[u]),Pe=y.useCallback((u,v=!1)=>{if(!u)return!1;const A=a.pathname||"";return v?A===u:u==="/admin"?A==="/admin":A.startsWith(u)},[a.pathname]);return t.jsxs("aside",{className:["h-screen sticky top-0 border-r border-white/20 dark:border-neutral-900/60 bg-gradient-to-b from-white/90 via-white to-white/60 dark:from-neutral-950 dark:via-neutral-950 dark:to-neutral-900 backdrop-blur-xl transition-[width] duration-200 ease-in-out shadow-[0_10px_40px_rgba(15,23,42,0.08)] dark:shadow-none",e?"w-20":"w-72"].join(" "),"aria-label":"Admin navigation",children:[t.jsxs("div",{className:"px-4 py-5 flex items-center justify-between border-b border-gray-200/50 dark:border-neutral-900/60",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white font-semibold shadow-lg shadow-blue-500/30",children:"SC"}),!e&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-neutral-100",children:"SnowCity Admin"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-neutral-400",children:"Experience Excellence"})]})]}),t.jsx("button",{className:"md:hidden rounded-full p-2 text-gray-500 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800",onClick:s,"aria-label":"Close navigation",children:"✕"})]}),!e&&t.jsx("div",{className:"px-4 pt-4",children:t.jsx("label",{className:"relative block",children:t.jsx("input",{type:"search",value:k,onChange:u=>Te(u.target.value),placeholder:"Quick find…",className:"w-full rounded-2xl border border-gray-200/80 bg-white/80 dark:bg-neutral-900 px-3 py-2 text-sm text-gray-700 dark:text-neutral-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40"})})}),t.jsx("nav",{className:"px-3 pb-4 h-[calc(100vh-140px)] overflow-y-auto",children:O.map(u=>{var A;if(!((A=u.items)!=null&&A.length))return null;const v=!!P[u.key];return t.jsxs("div",{className:"mt-3 first:mt-0",children:[t.jsxs("button",{type:"button",className:["w-full flex items-center justify-between px-3 py-2 rounded-2xl text-xs font-semibold tracking-wide uppercase","text-gray-500 dark:text-neutral-400 hover:bg-gray-100/70 dark:hover:bg-neutral-800/70 backdrop-blur"].join(" "),onClick:()=>Oe(u.key),"aria-expanded":v,"aria-controls":`section-${u.key}`,title:e?u.label:void 0,children:[!e&&t.jsx("span",{className:"font-medium",children:u.label}),e&&t.jsx("span",{className:"font-medium","aria-hidden":"true",children:u.label.charAt(0)}),t.jsx(We,{className:["h-4 w-4 shrink-0 transition-transform",v?"rotate-180":""].join(" ")})]}),t.jsx("div",{id:`section-${u.key}`,className:["overflow-hidden transition-all",v?"max-h-[1200px] ease-in":"max-h-0 ease-out"].join(" "),children:t.jsx("div",{className:"mt-1 space-y-1",children:u.items.map(({to:w,end:C,label:W,icon:Me,permsAny:Y,permsAll:K})=>{const J=t.jsxs(Fe,{to:w,end:C,title:e?W:void 0,className:({isActive:De})=>[ia,e?"justify-center px-2":"justify-start px-3",De?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30":"text-gray-600 dark:text-neutral-300 hover:bg-gray-100/80 dark:hover:bg-neutral-800"].join(" "),onClick:x,children:[t.jsx(Me,{className:"h-5 w-5","aria-hidden":"true"}),!e&&t.jsx("span",{children:W})]},w);return Y||K?t.jsx(oa,{anyOf:Y||[],allOf:K||[],children:J},w):t.jsxs("div",{className:"relative",children:[J,Pe(w,C)&&!e&&t.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":"true"})]},w)})})})]},u.key)})}),t.jsx("div",{className:"px-4 pb-5",children:t.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-slate-900 via-indigo-900 to-blue-700 text-white p-4 shadow-lg",children:[t.jsx("p",{className:"text-sm font-semibold mb-1",children:"Need quick access?"}),t.jsx("p",{className:"text-xs text-white/80 mb-3",children:"Jump to bookings or reach support instantly."}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx($,{to:"/admin/bookings",className:"inline-flex items-center justify-center rounded-full bg-white/10 px-3 py-1.5 text-xs font-semibold hover:bg-white/20",onClick:x,children:"Go to Bookings"}),t.jsx("a",{href:"mailto:support@snowcity.com",className:"inline-flex items-center justify-center rounded-full bg-white text-slate-900 px-3 py-1.5 text-xs font-semibold",children:"Contact Support"})]})]})})]})}const Se="sc_admin_theme",pa=()=>localStorage.getItem(Se)||"system",Re=()=>typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,ie=e=>{const s=document.documentElement,a=e==="dark"||e==="system"&&Re();s.classList.toggle("dark",!!a)};function Ce(){const[e,s]=y.useState(pa());y.useEffect(()=>{ie(e),localStorage.setItem(Se,e)},[e]),y.useEffect(()=>{if(e!=="system")return;const n=window.matchMedia("(prefers-color-scheme: dark)"),i=()=>ie("system");return n.addEventListener("change",i),()=>n.removeEventListener("change",i)},[e]);const a=e==="dark"||e==="system"&&Re();return{theme:e,setTheme:s,isDark:a}}function re({compact:e=!1}){const{theme:s,setTheme:a}=Ce();return t.jsxs("div",{className:`inline-flex items-center gap-1 ${e?"":"p-1 border rounded-lg bg-white dark:bg-neutral-900 dark:border-neutral-700"}`,children:[t.jsx("button",{className:`px-2 py-1 rounded-md text-xs ${s==="light"?"bg-gray-900 text-white":"border dark:border-neutral-700 dark:text-neutral-200"}`,onClick:()=>a("light"),children:"Light"}),t.jsx("button",{className:`px-2 py-1 rounded-md text-xs ${s==="dark"?"bg-gray-900 text-white":"border dark:border-neutral-700 dark:text-neutral-200"}`,onClick:()=>a("dark"),children:"Dark"}),t.jsx("button",{className:`px-2 py-1 rounded-md text-xs ${s==="system"?"bg-gray-900 text-white":"border dark:border-neutral-700 dark:text-neutral-200"}`,onClick:()=>a("system"),children:"System"})]})}const ua=[{label:"Reports",to:"/admin/analytics/overview"},{label:"Offers",to:"/admin/catalog/offers"}];function ha({onToggleSidebar:e,onToggleMobile:s}){const a=R(x=>{var k;return(k=x.adminAuth)==null?void 0:k.user}),n=q(),i=((a==null?void 0:a.name)||(a==null?void 0:a.email)||"A").charAt(0).toUpperCase(),[d,m]=y.useState(!1),[c,p]=y.useState(""),g=y.useRef(null);return y.useEffect(()=>{const x=k=>{g.current&&!g.current.contains(k.target)&&m(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),t.jsx("header",{className:"sticky top-0 z-40 bg-white/90 dark:bg-neutral-900/80 backdrop-blur supports-[backdrop-filter]:bg-white/70 border-b border-gray-200 dark:border-neutral-800",children:t.jsxs("div",{className:"h-16 px-3 md:px-6 flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:"md:hidden rounded-xl border border-gray-200 px-3 py-2 text-gray-600",onClick:s,"aria-label":"Open navigation",children:"☰"}),t.jsx("button",{className:"hidden md:inline-flex rounded-xl border border-gray-200 px-3 py-2 text-gray-600",onClick:e,"aria-label":"Toggle navigation",children:"☰"}),t.jsxs("div",{className:"hidden md:flex flex-col",children:[t.jsx("span",{className:"text-xs uppercase tracking-wide text-gray-500",children:"SnowCity Admin"}),t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Operations Control"})]})]}),t.jsxs("div",{className:"flex-1 flex items-center gap-3 max-w-3xl",children:[t.jsxs("label",{className:"flex-1 relative",children:[t.jsx(Gt,{className:"h-4 w-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),t.jsx("input",{type:"search",value:c,onChange:x=>p(x.target.value),placeholder:"Search bookings, users, offers...",className:"w-full rounded-full border border-gray-200 bg-white px-10 py-2 text-sm shadow-sm focus:border-gray-400 focus:outline-none"})]}),t.jsx("div",{className:"hidden lg:flex items-center gap-2",children:ua.map(x=>t.jsx($,{to:x.to,className:"rounded-full border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:border-gray-400",children:x.label},x.to))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:"hidden md:inline-flex h-9 w-9 items-center justify-center rounded-full border border-gray-200 text-gray-500","aria-label":"Notifications",children:t.jsx(ft,{className:"h-4 w-4"})}),t.jsx("div",{className:"hidden md:block",children:t.jsx(re,{compact:!0})}),t.jsxs("div",{className:"relative",ref:g,children:[t.jsx("button",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-gray-900 to-gray-700 text-white flex items-center justify-center",title:(a==null?void 0:a.name)||(a==null?void 0:a.email)||"Profile",onClick:()=>m(x=>!x),children:i}),d&&t.jsxs("div",{className:"absolute right-0 top-full mt-3 w-64 rounded-2xl border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 shadow-xl z-50 overflow-hidden",children:[t.jsxs("div",{className:"px-4 py-3",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-neutral-50",children:(a==null?void 0:a.name)||"Admin user"}),t.jsx("p",{className:"text-xs text-gray-500",children:a==null?void 0:a.email})]}),t.jsx("div",{className:"border-t border-gray-200 dark:border-neutral-800"}),t.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Theme"}),t.jsx(re,{})]}),t.jsx("div",{className:"border-t border-gray-200 dark:border-neutral-800"}),t.jsx($,{to:"/admin/profile",className:"block px-4 py-3 text-sm text-gray-700 dark:text-neutral-200 hover:bg-gray-50 dark:hover:bg-neutral-800",onClick:()=>m(!1),children:"Profile & Settings"}),t.jsx("button",{className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-gray-50 dark:hover:bg-neutral-800",onClick:()=>{m(!1),n(U())},children:"Logout"})]})]})]})]})})}const ya=j("adminAuth/adminLogin",async({email:e,password:s},{dispatch:a,rejectWithValue:n})=>{var i,d,m,c;try{const p=await qe.post(Ue.auth.login(),{email:e,password:s,isAdmin:!0}),g=p==null?void 0:p.token;if(!g)throw new Error("No token from login");return a(Je({user:{...p==null?void 0:p.user,isAdmin:!0},token:g,expires_at:(p==null?void 0:p.expires_at)||null})),await a(Le()).unwrap(),p}catch(p){a(U());const g=((d=(i=p==null?void 0:p.response)==null?void 0:i.data)==null?void 0:d.error)||((c=(m=p==null?void 0:p.response)==null?void 0:m.data)==null?void 0:c.message)||(p==null?void 0:p.message)||"Login failed";return n(g)}}),Le=j("adminAuth/hydratePerms",async(e,{dispatch:s,rejectWithValue:a})=>{var n,i,d,m;try{const c=["all"];return s(Q(c)),c}catch(c){s(Q([]));const p=((i=(n=c==null?void 0:c.response)==null?void 0:n.data)==null?void 0:i.error)||((m=(d=c==null?void 0:c.response)==null?void 0:d.data)==null?void 0:m.message)||(c==null?void 0:c.message)||"Failed to hydrate permissions";return a(p)}});function xa(){const[e,s]=y.useState(!1),[a,n]=y.useState(!1),i=q();return Ce(),y.useEffect(()=>{i(Le()).catch(()=>{})},[i]),t.jsxs("div",{className:"min-h-screen bg-slate-100/60 dark:bg-neutral-950",children:[t.jsxs("div",{className:"pointer-events-none fixed inset-0 z-0 opacity-60",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(59,130,246,0.12),transparent_45%)]"}),t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_bottom,_rgba(14,165,233,0.09),transparent_50%)]"})]}),t.jsxs("div",{className:"relative z-10 flex",children:[t.jsx("div",{className:"hidden md:block",children:t.jsx(oe,{collapsed:e,onClose:()=>{}})}),a&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:()=>n(!1)}),t.jsx("div",{className:"fixed left-0 top-0 bottom-0 w-64 bg-white dark:bg-neutral-900 z-50 shadow-lg",children:t.jsx(oe,{collapsed:!1,onClose:()=>n(!1)})})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx(ha,{onToggleSidebar:()=>s(d=>!d),onToggleMobile:()=>n(d=>!d)}),t.jsx("div",{className:"p-4 md:p-6",children:t.jsx(Ae,{})})]})]})]})}function ga(){const e=q(),s=R(g=>{var x;return(x=g.adminAuth)==null?void 0:x.token}),[a,n]=y.useState({email:"",password:""}),[i,d]=y.useState("idle"),[m,c]=y.useState(null);if(s)return t.jsx(S,{to:"/admin",replace:!0});const p=async g=>{g.preventDefault(),d("loading"),c(null);try{await e(ya(a)).unwrap()}catch(x){c((x==null?void 0:x.message)||"Login failed"),d("failed")}};return t.jsx("div",{className:"min-h-screen grid place-items-center bg-gray-50 px-4",children:t.jsxs("form",{onSubmit:p,className:"w-full max-w-sm bg-white rounded-xl border p-6 shadow",children:[t.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Admin Login"}),t.jsx("label",{className:"block text-sm mb-1",children:"Email"}),t.jsx("input",{className:"w-full rounded-md border px-3 py-2 mb-3",type:"email",value:a.email,onChange:g=>n({...a,email:g.target.value})}),t.jsx("label",{className:"block text-sm mb-1",children:"Password"}),t.jsx("input",{className:"w-full rounded-md border px-3 py-2 mb-3",type:"password",value:a.password,onChange:g=>n({...a,password:g.target.value})}),m?t.jsx("div",{className:"text-sm text-red-600 mb-2",children:m}):null,t.jsx("button",{className:"w-full rounded-md bg-gray-900 text-white py-2 text-sm",disabled:i==="loading",children:i==="loading"?"Signing in…":"Sign in"})]})})}const ba=r.lazy(()=>l(()=>import("./AdminsList-Cvq4Xrv2.js"),__vite__mapDeps([0,1,2,3,4,5]))),ka=r.lazy(()=>l(()=>import("./AdminNew-D7TrdZnG.js"),__vite__mapDeps([6,1,2,3,4,5]))),le=r.lazy(()=>l(()=>import("./AdminAccess-T4xTjI_v.js"),__vite__mapDeps([7,1,2,3,4,5]))),_a=r.lazy(()=>l(()=>import("./Dashboard-D2SPbn-l.js"),__vite__mapDeps([8,1,2,9,10,11,12,13,14,15,16,3,4,5]))),fa=r.lazy(()=>l(()=>import("./BookingsList-C00Rgmyf.js"),__vite__mapDeps([17,1,2,18,19,20,3,4,10,11,12,13,14,5]))),ja=r.lazy(()=>l(()=>import("./BookingDetails-DoxbG0UD.js"),__vite__mapDeps([21,1,2,3,4,5]))),va=r.lazy(()=>l(()=>import("./AttractionsList-Bgcm_rYG.js"),__vite__mapDeps([22,1,2,18,23,3,4,5]))),de=r.lazy(()=>l(()=>import("./AttractionForm-BL4AZhoy.js"),__vite__mapDeps([24,1,2,25,26,3,4,5]))),Aa=r.lazy(()=>l(()=>import("./SlotList-BflW8LV8.js"),__vite__mapDeps([27,1,2,18,3,4,5]))),ce=r.lazy(()=>l(()=>import("./SlotForm-Cv-_LDUK.js"),__vite__mapDeps([28,1,2,3,4,5]))),wa=r.lazy(()=>l(()=>import("./SlotBulk-VimQRzRh.js"),__vite__mapDeps([29,1,2,3,4,5]))),Ea=r.lazy(()=>l(()=>import("./AddonsList-DaA7WYTT.js"),__vite__mapDeps([30,1,2,18,3,4,5]))),me=r.lazy(()=>l(()=>import("./AddonForm-C0tL9SUN.js"),__vite__mapDeps([31,1,2,25,26,3,4,5]))),Na=r.lazy(()=>l(()=>import("./OffersList-B0ujgnW8.js"),__vite__mapDeps([32,1,2,18,3,4,5]))),pe=r.lazy(()=>l(()=>import("./OfferForm-BdC3_JjR.js"),__vite__mapDeps([33,1,2,25,26,34,3,4,5]))),Sa=r.lazy(()=>l(()=>import("./CouponsList-BVZds8Db.js"),__vite__mapDeps([35,1,2,18,19,3,4,5]))),ue=r.lazy(()=>l(()=>import("./CouponForm-DLrB-jkj.js"),__vite__mapDeps([36,1,2,3,4,5]))),Ra=r.lazy(()=>l(()=>import("./BannersList-BgOkozqp.js"),__vite__mapDeps([37,1,2,18,23,3,4,5]))),he=r.lazy(()=>l(()=>import("./BannerForm-B2ah9eD6.js"),__vite__mapDeps([38,1,2,25,26,3,4,5]))),Ca=r.lazy(()=>l(()=>import("./PagesList-DPZtp2pz.js"),__vite__mapDeps([39,1,2,3,4,5]))),ye=r.lazy(()=>l(()=>import("./PageForm-CLA8RAIT.js"),__vite__mapDeps([40,1,2,41,25,26,34,3,4,5]))),La=r.lazy(()=>l(()=>import("./BlogsList-jhYqXXUi.js"),__vite__mapDeps([42,1,2,18,26,3,4,5]))),xe=r.lazy(()=>l(()=>import("./BlogForm-_3sJHCxM.js"),__vite__mapDeps([43,1,2,25,26,41,3,4,5]))),Ta=r.lazy(()=>l(()=>import("./CombosList-BOX72Wuh.js"),__vite__mapDeps([44,1,2,18,3,4,5]))),ge=r.lazy(()=>l(()=>import("./ComboForm-CmYF0lWZ.js"),__vite__mapDeps([45,1,2,25,26,3,4,5]))),Ia=r.lazy(()=>l(()=>import("./AttractionSlotList-UYrMl3uN.js"),__vite__mapDeps([46,1,2,3,4,5]))),Oa=r.lazy(()=>l(()=>import("./GalleryManager-D_q7DFUK.js"),__vite__mapDeps([47,1,2,18,26,3,4,5]))),be=r.lazy(()=>l(()=>import("./GalleryForm-DQ_XV49-.js"),__vite__mapDeps([48,1,2,25,26,34,3,4,5]))),Pa=r.lazy(()=>l(()=>import("./ComboSlotList-BJ3BuzKm.js"),__vite__mapDeps([49,1,2,3,4,5]))),ke=r.lazy(()=>l(()=>import("./ComboSlotForm-Bind13rc.js"),__vite__mapDeps([50,1,2,3,4,5]))),Ma=r.lazy(()=>l(()=>import("./ComboSlotBulk-Dt3Gqrzg.js"),__vite__mapDeps([51,1,2,3,4,5]))),Da=r.lazy(()=>l(()=>import("./UsersList-DM9hirFE.js"),__vite__mapDeps([52,1,2,18,19,3,4,5]))),za=r.lazy(()=>l(()=>import("./UserEdit-_VVMjgvD.js"),__vite__mapDeps([53,1,2,3,4,5]))),Ba=r.lazy(()=>l(()=>import("./RolesList-CVEakMfU.js"),__vite__mapDeps([54,1,2,18,3,4,5]))),_e=r.lazy(()=>l(()=>import("./RoleForm-EmbY5Y-u.js"),__vite__mapDeps([55,1,2,3,4,5]))),Va=r.lazy(()=>l(()=>import("./Overview-vLOBQCkO.js"),__vite__mapDeps([56,1,2,9,3,4,5]))),$a=r.lazy(()=>l(()=>import("./Attractions-BIlIwAXa.js"),__vite__mapDeps([57,1,2,10,11,12,15,16,3,4,5]))),Fa=r.lazy(()=>l(()=>import("./Daily-CAkN25LU.js"),__vite__mapDeps([58,1,2,10,11,12,59,16,14,13,3,4,5]))),qa=r.lazy(()=>l(()=>import("./Custom-Dhwy8E4X.js"),__vite__mapDeps([60,1,2,10,11,12,13,14,3,4,5]))),Ua=r.lazy(()=>l(()=>import("./People-C_ZieroU.js"),__vite__mapDeps([61,1,2,10,11,12,13,14,3,4,5]))),Ha=r.lazy(()=>l(()=>import("./Views-Bi3iFGtF.js"),__vite__mapDeps([62,1,2,10,11,12,13,14,3,4,5]))),Ga=r.lazy(()=>l(()=>import("./Split-DTkw2xXt.js"),__vite__mapDeps([63,1,2,10,11,12,59,16,14,3,4,5]))),Wa=r.lazy(()=>l(()=>import("./TopAttractions-CRFmSDTU.js"),__vite__mapDeps([64,1,2,3,4,5]))),Ya=r.lazy(()=>l(()=>import("./AttractionRevenue-D_Lc2yxg.js"),__vite__mapDeps([65,1,2,20,3,4,5]))),Ka=r.lazy(()=>l(()=>import("./ComboRevenue-BnhmtHke.js"),__vite__mapDeps([66,1,2,20,3,4,5])));function Ja({children:e}){return R(a=>{var n;return(n=a.adminAuth)==null?void 0:n.token})?e:t.jsx(S,{to:"login",replace:!0})}function fe(){return t.jsx(r.Suspense,{fallback:t.jsx("div",{className:"p-4 text-sm",children:"Loading…"}),children:t.jsx(Ae,{})})}function Za(){return t.jsxs(He,{children:[t.jsx(o,{path:"login",element:t.jsx(ga,{})}),t.jsx(o,{path:"/",element:t.jsx(Ja,{children:t.jsx(xa,{})}),children:t.jsxs(o,{element:t.jsx(fe,{}),children:[t.jsx(o,{index:!0,element:t.jsx(_a,{})}),t.jsxs(o,{path:"analytics",element:t.jsx(fe,{}),children:[t.jsx(o,{index:!0,element:t.jsx(S,{to:"overview",replace:!0})}),t.jsx(o,{path:"overview",element:t.jsx(Va,{})}),t.jsx(o,{path:"attractions",element:t.jsx($a,{})}),t.jsx(o,{path:"daily",element:t.jsx(Fa,{})}),t.jsx(o,{path:"custom",element:t.jsx(qa,{})}),t.jsx(o,{path:"people",element:t.jsx(Ua,{})}),t.jsx(o,{path:"views",element:t.jsx(Ha,{})}),t.jsx(o,{path:"split",element:t.jsx(Ga,{})}),t.jsx(o,{path:"top-attractions",element:t.jsx(Wa,{})})]}),t.jsx(o,{path:"bookings",element:t.jsx(fa,{})}),t.jsx(o,{path:"bookings/:id",element:t.jsx(ja,{})}),t.jsx(o,{path:"catalog/attractions",element:t.jsx(va,{})}),t.jsx(o,{path:"catalog/attractions/new",element:t.jsx(de,{})}),t.jsx(o,{path:"catalog/attractions/:id",element:t.jsx(de,{})}),t.jsx(o,{path:"catalog/slots",element:t.jsx(Aa,{})}),t.jsx(o,{path:"catalog/slots/bulk",element:t.jsx(wa,{})}),t.jsx(o,{path:"catalog/slots/new",element:t.jsx(ce,{})}),t.jsx(o,{path:"catalog/slots/:id",element:t.jsx(ce,{})}),t.jsx(o,{path:"catalog/addons",element:t.jsx(Ea,{})}),t.jsx(o,{path:"catalog/addons/new",element:t.jsx(me,{})}),t.jsx(o,{path:"catalog/addons/:id",element:t.jsx(me,{})}),t.jsx(o,{path:"catalog/offers",element:t.jsx(Na,{})}),t.jsx(o,{path:"catalog/offers/new",element:t.jsx(pe,{})}),t.jsx(o,{path:"catalog/offers/:id",element:t.jsx(pe,{})}),t.jsx(o,{path:"catalog/coupons",element:t.jsx(Sa,{})}),t.jsx(o,{path:"catalog/coupons/new",element:t.jsx(ue,{})}),t.jsx(o,{path:"catalog/coupons/:id",element:t.jsx(ue,{})}),t.jsx(o,{path:"catalog/combo-slots",element:t.jsx(Pa,{})}),t.jsx(o,{path:"catalog/combo-slots/new",element:t.jsx(ke,{})}),t.jsx(o,{path:"catalog/combo-slots/:id",element:t.jsx(ke,{})}),t.jsx(o,{path:"catalog/combo-slots/bulk",element:t.jsx(Ma,{})}),t.jsx(o,{path:"catalog/attraction-slots",element:t.jsx(Ia,{})}),t.jsx(o,{path:"catalog/banners",element:t.jsx(Ra,{})}),t.jsx(o,{path:"catalog/banners/new",element:t.jsx(he,{})}),t.jsx(o,{path:"catalog/banners/:id",element:t.jsx(he,{})}),t.jsx(o,{path:"catalog/pages",element:t.jsx(Ca,{})}),t.jsx(o,{path:"catalog/pages/new",element:t.jsx(ye,{})}),t.jsx(o,{path:"catalog/pages/:id",element:t.jsx(ye,{})}),t.jsx(o,{path:"catalog/blogs",element:t.jsx(La,{})}),t.jsx(o,{path:"catalog/blogs/new",element:t.jsx(xe,{})}),t.jsx(o,{path:"catalog/blogs/:id",element:t.jsx(xe,{})}),t.jsx(o,{path:"catalog/combos",element:t.jsx(Ta,{})}),t.jsx(o,{path:"catalog/combos/new",element:t.jsx(ge,{})}),t.jsx(o,{path:"catalog/combos/:id",element:t.jsx(ge,{})}),t.jsx(o,{path:"catalog/gallery",element:t.jsx(Oa,{})}),t.jsx(o,{path:"catalog/gallery/new",element:t.jsx(be,{})}),t.jsx(o,{path:"catalog/gallery/:id",element:t.jsx(be,{})}),t.jsx(o,{path:"users",element:t.jsx(Da,{})}),t.jsx(o,{path:"users/:id",element:t.jsx(za,{})}),t.jsx(o,{path:"roles",element:t.jsx(Ba,{})}),t.jsx(o,{path:"roles/new",element:t.jsx(_e,{})}),t.jsx(o,{path:"roles/:id",element:t.jsx(_e,{})}),t.jsx(o,{path:"admins",element:t.jsx(ba,{})}),t.jsx(o,{path:"admins/new",element:t.jsx(ka,{})}),t.jsx(o,{path:"admins/access",element:t.jsx(le,{})}),t.jsx(o,{path:"admins/:id/access",element:t.jsx(le,{})}),t.jsx(o,{path:"revenue/attractions",element:t.jsx(Ya,{})}),t.jsx(o,{path:"revenue/combos",element:t.jsx(Ka,{})}),t.jsx(o,{path:"*",element:t.jsx(S,{to:".",replace:!0})})]})}),t.jsx(o,{path:"*",element:t.jsx(S,{to:"/admin",replace:!0})})]})}class Qa extends y.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){}render(){var s;return this.state.hasError?t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Something went wrong"}),t.jsx("p",{className:"text-gray-600",children:((s=this.state.error)==null?void 0:s.message)||"Unknown error"})]}):this.props.children}}function Xa(){return t.jsx(Ge,{store:T,children:t.jsx(Qa,{children:t.jsx(r.Suspense,{fallback:t.jsx("div",{className:"p-6",children:"Loading admin…"}),children:t.jsx(Za,{})})})})}const ns=Object.freeze(Object.defineProperty({__proto__:null,default:Xa},Symbol.toStringTag,{value:"Module"}));export{f as A,_ as a,pt as b,lt as c,dt as d,it as e,ns as f,V as g,B as l,rt as p,mt as r,ot as u};
