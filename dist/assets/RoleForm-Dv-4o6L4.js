import{C as f,A as b,R as p,j as r,L as g}from"./index-DpUnVvi7.js";import{a as n,A as m}from"./AdminApp-DElutmvv.js";import"./createLucideIcon-DlloiUI2.js";import"./file-text-BcxeLTgw.js";import"./users-Dj4zQjFo.js";import"./newspaper-D6LH_a5a.js";import"./ticket-DJwTfedz.js";import"./chevron-down-BM4ufvPU.js";function E(){var u;const{id:o}=f(),s=!!o,d=b(),[a,i]=p.useState({status:s?"loading":"idle",error:null,form:{role_name:"",description:""}});p.useEffect(()=>{s&&(async()=>{try{const e=await n.get(m.roleById(o)),t=(e==null?void 0:e.role)||e||{};i(l=>({...l,status:"idle",form:{role_name:t.role_name||"",description:t.description||""}}))}catch(e){i(t=>({...t,status:"failed",error:e}))}})()},[o,s]);const x=async e=>{e.preventDefault();try{s?await n.put(m.roleById(o),a.form):await n.post(m.roles(),a.form),d("/admin/roles")}catch(t){i(l=>({...l,error:t}))}};if(a.status==="loading")return r.jsx("div",{children:"Loadingâ€¦"});if(a.status==="failed")return r.jsx("div",{className:"text-red-600",children:((u=a.error)==null?void 0:u.message)||"Failed to load"});const c=a.form;return r.jsxs("form",{onSubmit:x,className:"max-w-xl bg-white border rounded-xl p-4",children:[r.jsxs("h1",{className:"text-xl font-semibold mb-4",children:[s?"Edit":"New"," Role"]}),r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Role Name"}),r.jsx("input",{className:"w-full rounded-md border px-3 py-2 mb-3",value:c.role_name,onChange:e=>i(t=>({...t,form:{...t.form,role_name:e.target.value}}))}),r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description"}),r.jsx("textarea",{className:"w-full rounded-md border px-3 py-2 mb-3",rows:4,value:c.description,onChange:e=>i(t=>({...t,form:{...t.form,description:e.target.value}}))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",className:"rounded-md bg-gray-900 text-white px-4 py-2 text-sm",children:"Save"}),s?r.jsx(g,{to:`/admin/roles/${o}/permissions`,className:"rounded-md border px-4 py-2 text-sm",children:"Edit Permissions"}):null,r.jsx("button",{type:"button",className:"rounded-md border px-4 py-2 text-sm",onClick:()=>d(-1),children:"Cancel"})]})]})}export{E as default};
