import{R as i,D as a,j as e}from"./index-D_x0VcQ4.js";import{a as p}from"./AdminApp-Ct7HyYhZ.js";import{R as h,T as g}from"./CategoricalChart-C0B7JwUA.js";import{P as u,a as b}from"./PieChart-DYAyDciQ.js";import{C as j}from"./tooltipContext-BM-wlyer.js";import"./createLucideIcon-CDLCmtzs.js";import"./file-text-B8djhIpu.js";import"./ticket-5vjBYnJB.js";import"./clsx-B-dksMZM.js";import"./index-BGaTdwbE.js";const n=["#2563eb","#10b981","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#e11d48","#22c55e","#f97316","#3b82f6"];function Y(){const[r,l]=i.useState(a().subtract(30,"day").startOf("day").toISOString()),[s,c]=i.useState(a().endOf("day").toISOString()),[d,m]=i.useState([]);i.useEffect(()=>{(async()=>{const t=await p.get("/api/admin/analytics/attractions-breakdown",{from:r,to:s,limit:50});m(Array.isArray(t)?t:[])})()},[r,s]);const x=`/api/admin/analytics/report.csv?type=attractions-breakdown&from=${encodeURIComponent(r)}&to=${encodeURIComponent(s)}`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{type:"datetime-local",className:"rounded-md border px-2 py-1 text-sm dark:bg-neutral-900 dark:border-neutral-700",value:a(r).format("YYYY-MM-DDTHH:mm"),onChange:t=>l(a(t.target.value).toISOString())}),e.jsx("input",{type:"datetime-local",className:"rounded-md border px-2 py-1 text-sm dark:bg-neutral-900 dark:border-neutral-700",value:a(s).format("YYYY-MM-DDTHH:mm"),onChange:t=>c(a(t.target.value).toISOString())}),e.jsx("a",{href:x,className:"ml-auto px-3 py-1 rounded-md border text-sm",children:"Download CSV"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-xl border bg-white dark:bg-neutral-900 border-gray-200 dark:border-neutral-800 p-3",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Attractions-wise Bookings"}),e.jsx("div",{style:{height:320},children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(u,{children:[e.jsx(b,{data:d,dataKey:"bookings",nameKey:"title",outerRadius:120,children:d.map((t,o)=>e.jsx(j,{fill:n[o%n.length]},o))}),e.jsx(g,{})]})})})]}),e.jsx("div",{className:"rounded-xl border bg-white dark:bg-neutral-900 border-gray-200 dark:border-neutral-800 p-3 overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-neutral-800",children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Attraction"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Bookings"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"People"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Revenue"})]})}),e.jsxs("tbody",{children:[d.map(t=>e.jsxs("tr",{className:"border-t dark:border-neutral-800",children:[e.jsx("td",{className:"px-3 py-2",children:t.title}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.bookings}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.people??0}),e.jsxs("td",{className:"px-3 py-2 text-right",children:["â‚¹ ",Number(t.revenue||0).toLocaleString()]})]},t.attraction_id)),!d.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-6 text-center text-gray-500 dark:text-neutral-400",colSpan:4,children:"No data"})})]})]})})]})]})}export{Y as default};
