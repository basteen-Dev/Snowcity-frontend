const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-aKO74hDF.js","assets/CategoricalChart-CsUPHP5M.js","assets/index-C5Mz9dTM.js","assets/index-D5Jqzt5t.css","assets/clsx-B-dksMZM.js","assets/index-CCCQe3aM.js","assets/CartesianChart-D0sgDsXG.js","assets/tooltipContext-agcBB9jA.js","assets/LineChart-nQj6CBM0.js","assets/PieChart-BGt-r5v1.js","assets/BarChart-DvV3gu1n.js"])))=>i.map(i=>d[i]);
import{R as l,E as c,j as r,_ as b}from"./index-C5Mz9dTM.js";import{a as h,A as f}from"./AdminApp-C7IcGGGV.js";import"./createLucideIcon-DQ6FqzLt.js";import"./file-text-CQ7rExmv.js";import"./ticket-C3bgGsni.js";function g({data:e}){const[s,n]=l.useState(null);if(l.useEffect(()=>{let u=!0;return(async()=>{try{const d=await b(()=>import("./index-aKO74hDF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));if(!u)return;n({ResponsiveContainer:d.ResponsiveContainer,BarChart:d.BarChart,Bar:d.Bar,CartesianGrid:d.CartesianGrid,XAxis:d.XAxis,YAxis:d.YAxis,Tooltip:d.Tooltip})}catch(d){console.warn("Recharts failed to load; showing fallback.",d),u&&n(!1)}})(),()=>{u=!1}},[]),s===null)return r.jsx("div",{className:"h-80 bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-3 animate-pulse"});if(s===!1)return r.jsx("div",{className:"h-80 bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-3 flex items-center justify-center text-sm text-gray-600 dark:text-neutral-300",children:"Charts unavailable (recharts not installed). You can install it with: npm i recharts --legacy-peer-deps"});const{ResponsiveContainer:i,BarChart:a,Bar:t,CartesianGrid:o,XAxis:m,YAxis:x,Tooltip:p}=s;return r.jsx("div",{className:"h-80 bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl p-3",children:r.jsx(i,{width:"100%",height:"100%",children:r.jsxs(a,{data:e,children:[r.jsx(o,{stroke:"#eee",strokeDasharray:"5 5"}),r.jsx(m,{dataKey:"title"}),r.jsx(x,{}),r.jsx(p,{}),r.jsx(t,{dataKey:"total_revenue",fill:"#2563eb",name:"Revenue"})]})})})}function C(){var i;const[e,s]=l.useState({status:"idle",data:[],error:null,from:c().subtract(30,"day").format("YYYY-MM-DD"),to:c().format("YYYY-MM-DD"),limit:10}),n=async()=>{s(a=>({...a,status:"loading",error:null}));try{const a=await h.get(f.analyticsTopAttractions(),{params:{from:e.from,to:e.to,limit:e.limit}}),t=Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a)?a:[];s(o=>({...o,status:"succeeded",data:t}))}catch(a){s(t=>({...t,status:"failed",error:a}))}};return l.useEffect(()=>{n()},[]),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 dark:text-neutral-100",children:"Top Attractions"}),r.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-4 gap-2",children:[r.jsx("input",{type:"date",className:"rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:e.from,onChange:a=>s(t=>({...t,from:a.target.value}))}),r.jsx("input",{type:"date",className:"rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:e.to,onChange:a=>s(t=>({...t,to:a.target.value}))}),r.jsx("input",{type:"number",className:"rounded-md border px-3 py-2 dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200",value:e.limit,onChange:a=>s(t=>({...t,limit:Number(a.target.value||10)}))}),r.jsx("button",{className:"rounded-md border px-3 py-2 text-sm dark:border-neutral-700 dark:text-neutral-200",onClick:n,children:"Apply"})]}),e.status==="failed"?r.jsx("div",{className:"text-red-600",children:((i=e.error)==null?void 0:i.message)||"Failed to load"}):null,r.jsx(g,{data:e.data})]})}export{C as default};
