import{B as y,R as n,j as s}from"./index-D_x0VcQ4.js";import{a as d,A as m}from"./AdminApp-Ct7HyYhZ.js";import{A as x}from"./AdminTable-Ca_eHIx7.js";import{A as h}from"./AdminPagination-DJF8ehAL.js";import"./createLucideIcon-CDLCmtzs.js";import"./file-text-B8djhIpu.js";import"./ticket-5vjBYnJB.js";function k(){const c=y(),[t,r]=n.useState({status:"idle",items:[],roles:[],role:"",q:"",error:null,page:1,limit:20,meta:null}),u=async()=>{try{const e=await d.get(m.roles()),a=Array.isArray(e==null?void 0:e.data)?e.data:Array.isArray(e)?e:[];r(o=>({...o,roles:a}))}catch{}},l=async(e=1)=>{r(a=>({...a,status:"loading",error:null,page:e}));try{const a=await d.get(m.users(),{params:{search:t.q||void 0,role:t.role||void 0,page:e,limit:t.limit}}),o=Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a)?a:[];r(g=>({...g,status:"succeeded",items:o,meta:(a==null?void 0:a.meta)||null,page:e}))}catch(a){r(o=>({...o,status:"failed",error:a}))}};n.useEffect(()=>{u(),l(1)},[]);const i=t.meta||{},p=i.totalPages||i.total_pages||1;return s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold mb-3",children:"Users"}),s.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-4 gap-2",children:[s.jsx("input",{className:"rounded-md border px-3 py-2",placeholder:"Search name/email/phone",value:t.q,onChange:e=>r({...t,q:e.target.value})}),s.jsxs("select",{className:"rounded-md border px-3 py-2",value:t.role,onChange:e=>r({...t,role:e.target.value}),children:[s.jsx("option",{value:"",children:"All roles"}),(t.roles||[]).map(e=>s.jsx("option",{value:e.role_name,children:e.role_name},e.role_id))]}),s.jsx("button",{className:"rounded-md border px-3 py-2 text-sm",onClick:()=>l(1),children:"Filter"})]}),s.jsx(x,{keyField:"user_id",columns:[{key:"name",title:"Name"},{key:"email",title:"Email"},{key:"phone",title:"Phone"},{key:"last_login_at",title:"Last Login"}],rows:t.items,onRowClick:e=>c(`/admin/users/${e.user_id}`),empty:t.status==="loading"?"Loadingâ€¦":"No users found"}),s.jsx(h,{page:t.page,totalPages:p,onPage:e=>l(e)})]})}export{k as default};
