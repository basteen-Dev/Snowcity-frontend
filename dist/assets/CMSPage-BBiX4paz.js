import{C as v,h as y,R as i,u as w,H as N,i as k,k as S,j as e,z as _,L as u}from"./index-DpUnVvi7.js";import{E as C}from"./ErrorState-maGIkZl4.js";import{R as E,H as h}from"./RawFrame-K-4Kdwt0.js";import{i as g}from"./media-CQLQFIy8.js";import{L as H,c as L}from"./SkeletonLoader-BebQuHQ5.js";import"./clsx-B-dksMZM.js";function A(){const{slug:r}=v(),m=y(),[n,c]=i.useState({status:"idle",page:null,error:null}),o=w(t=>t.gallery),l=i.useMemo(()=>(o.items||[]).filter(t=>String(t.media_type||"").toLowerCase()!=="video"),[o.items]),p=i.useMemo(()=>{const t=l[0];return t?g(t.image_url||t.url):"https://picsum.photos/seed/snow-gallery/1280/720"},[l]),d=i.useMemo(()=>l.slice(0,4),[l]);if(i.useEffect(()=>{r==="about-us"&&o.status==="idle"&&m(N({active:!0,limit:50}))},[r,o.status,m]),i.useEffect(()=>{if(!r)return;const t=new AbortController;return(async()=>{c({status:"loading",page:null,error:null});try{const s=await k.get(S.pages.bySlug(r),{signal:t.signal}),j=(s==null?void 0:s.page)||s||null;c({status:"succeeded",page:j,error:null})}catch(s){c({status:"failed",page:null,error:(s==null?void 0:s.message)||"Failed to load page"})}})(),()=>t.abort()},[r]),n.status==="loading")return e.jsx(_,{});if(n.status==="failed")return e.jsx(C,{message:n.error});const a=n.page||{},f=(a.editor_mode||"").toLowerCase(),x=a.title||a.name||"Page",b=f==="raw";return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#e0f2fe] via-[#bae6fd] to-white w-full px-4 pt-20 pb-10 md:pb-14",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-4",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-semibold",children:x}),b?e.jsx(E,{title:x,html:a.raw_html||"",css:a.raw_css||"",js:a.raw_js||"",className:"w-full min-h-[70vh]"}):a.content_html?e.jsx(h,{className:"prose prose-lg max-w-none",html:a.content_html}):a.content?e.jsx(h,{className:"prose prose-lg max-w-none",html:a.content}):e.jsx("p",{className:"text-gray-600",children:"No content available."}),r==="about-us"&&e.jsx("div",{className:"mt-16 pt-16 border-t border-sky-100",children:e.jsx(H,{minHeight:420,placeholder:e.jsx("div",{className:"py-8",children:e.jsx(L,{})}),children:o.status==="succeeded"&&l.length>0?e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-bold tracking-[0.3em] text-sky-500/70 uppercase text-center",children:"CAPTURED MOMENTS"}),e.jsx("h2",{className:"mt-4 text-3xl md:text-4xl font-extrabold text-slate-900 text-center",children:"Gallery Highlights"}),e.jsx("p",{className:"mt-4 text-gray-600 max-w-2xl mx-auto text-center",children:"A glimpse of visitors having the time of their lives inside SnowCity."})]}),e.jsx("div",{className:"relative mx-auto max-w-5xl",children:e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-2xl shadow-xl",style:{backgroundImage:`url(${p})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-white/90 text-4xl text-slate-900 shadow-xl",children:"ðŸ“¸"}),e.jsx("div",{className:"text-2xl font-semibold text-white",children:"Gallery Highlights"}),e.jsx("div",{className:"text-sm text-white/80 mt-1",children:"Tap to explore memories"}),e.jsx(u,{to:"/gallery",className:"mt-4 inline-flex items-center gap-2 rounded-full bg-sky-600 px-6 py-2.5 text-sm font-semibold text-white shadow-lg hover:bg-sky-700 transition-all duration-300",children:"View Full Gallery â†’"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4",children:[d.map((t,s)=>e.jsxs("div",{className:"relative h-28 overflow-hidden rounded-xl border border-sky-100 bg-white shadow-sm hover:shadow-lg transition-all duration-300 hover:scale-105",children:[e.jsx("img",{src:g(t.image_url||t.url),alt:"snowcity",className:"h-full w-full object-cover transition-transform duration-300 hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/5"})]},`${t.id??t.media_id??s}-${s}`)),l.length>d.length&&e.jsxs(u,{to:"/gallery",className:"relative h-28 rounded-xl border border-dashed border-sky-300 bg-sky-50 flex items-center justify-center text-center text-sky-700 font-bold hover:bg-sky-100 transition-all duration-300",children:["+",l.length-d.length," more"]})]})]}):null})})]})})}export{A as default};
